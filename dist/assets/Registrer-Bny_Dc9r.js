import{_ as C,c as w,o as h,w as o,a as s,b as t,e as a,g,h as V,t as y,f as R}from"./index-Dh7kI4jI.js";import{V as p,a as m,d,b as T,e as E,f as P}from"./VCard-Cmc6vJ8q.js";import{V as A}from"./VForm-BXt1Yd4O.js";import{V as c,k as v,a as x}from"./VTextField-BR1_iDts.js";import{V as k}from"./VAlert-BMtlPOoC.js";import{V as z}from"./VSelect-DK1SXm7i.js";import{V as S}from"./VCheckbox-DWoEZdva.js";import{V as U}from"./VSnackbar-C9s1oWwd.js";import"./tag-CE7kSe09.js";import"./ssrBoot-CK06tIrr.js";import"./VMenu-x2Orytf9.js";import"./VChip-DgJE4qLc.js";const _={name:"RegistrerPage",data(){return{formRef:null,valid:!1,name:"",email:"",password:"",passwordConfirm:"",role:"",acceptTerms:!1,showPassword:!1,showPasswordConfirm:!1,loading:!1,error:null,snackbar:!1,snackbarText:"",snackbarColor:"success"}},computed:{nameRules(){return[l=>!!l||"Nome é obrigatório",l=>l.trim().length>=3||"Informe pelo menos 3 caracteres"]},emailRules(){return[l=>!!l||"E-mail é obrigatório",l=>/.+@.+\..+/.test(l)||"E-mail deve ser válido"]},passwordRules(){return[l=>!!l||"Senha é obrigatória",l=>l.length>=6||"Senha deve ter pelo menos 6 caracteres"]},passwordConfirmRules(){return[l=>!!l||"Confirmação é obrigatória",l=>l===this.password||"As senhas não conferem"]},roleRules(){return[l=>!!l||"Função é obrigatória"]},termsRules(){return[l=>l||"Você deve aceitar os termos e condições"]}},methods:{async handleRegister(){if(!this.formRef)return;const{valid:l}=await this.formRef.validate();if(l){this.loading=!0,this.error=null;try{const u=await(await fetch("http://localhost:3001/usuarios")).json(),f=Array.isArray(u)&&Array.isArray(u[0])?u[0]:Array.isArray(u)?u:[];if(f.some(b=>b.email===this.email)){this.error="Este e-mail já está cadastrado",this.loading=!1;return}const n=f.length>0?Math.max(...f.map(b=>b.id))+1:1,i={id:n,nome:this.name,email:this.email,senha:this.password,id_contato:n,role:"estoquista"};if(f.push(i),!(await fetch("http://localhost:3001/usuarios",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify([f])})).ok)throw new Error("Erro ao cadastrar usuário");this.snackbarText="Conta criada com sucesso!",this.snackbarColor="success",this.snackbar=!0,this.name="",this.email="",this.password="",this.passwordConfirm="",this.role="",this.acceptTerms=!1,this.formRef.reset(),setTimeout(()=>{this.$router.push("/login")},2e3)}catch(e){console.error("Erro ao cadastrar:",e),this.error="Erro ao cadastrar usuário. Tente novamente.",this.snackbarText="Erro ao cadastrar usuário",this.snackbarColor="error",this.snackbar=!0}finally{this.loading=!1}}},goToLogin(){this.$router.push("/login")}}},I={class:"branding-section"},q={class:"branding-content"},N={class:"feature-item"},B={class:"feature-item"},j={class:"feature-item"},D={class:"register-form-wrapper"},F={class:"text-center mb-6"},G={class:"mb-4"},J={class:"text-h6 font-weight-bold mb-3"},L={class:"mb-4"},M={class:"text-h6 font-weight-bold mb-3"},O={class:"mb-4"},H={class:"text-h6 font-weight-bold mb-3"},K={class:"text-body-2"},Q={class:"text-center"},W={class:"d-flex align-center"},X={class:"font-weight-bold"},Y={key:0,class:"text-caption"};function Z(l,e,u,f,r,n){return h(),w(P,{class:"fill-height pa-0",fluid:""},{default:o(()=>[s(p,{class:"fill-height","no-gutters":""},{default:o(()=>[s(m,{class:"d-none d-lg-flex",cols:"12",lg:"5"},{default:o(()=>[t("div",I,[t("div",q,[s(d,{class:"mb-6",color:"white",size:"120"},{default:o(()=>[...e[12]||(e[12]=[a(" mdi-warehouse ",-1)])]),_:1}),e[19]||(e[19]=t("h1",{class:"text-h2 font-weight-bold text-white mb-4"}," Sistema de Estoque ",-1)),e[20]||(e[20]=t("p",{class:"text-h5 text-white opacity-90 mb-8"}," Gerencie seu estoque com eficiência e praticidade ",-1)),s(p,{class:"mt-8"},{default:o(()=>[s(m,{cols:"12"},{default:o(()=>[t("div",N,[s(d,{color:"white",size:"30"},{default:o(()=>[...e[13]||(e[13]=[a("mdi-check-circle",-1)])]),_:1}),e[14]||(e[14]=t("span",{class:"text-h6 text-white ml-3"},"Controle total de produtos",-1))])]),_:1}),s(m,{cols:"12"},{default:o(()=>[t("div",B,[s(d,{color:"white",size:"30"},{default:o(()=>[...e[15]||(e[15]=[a("mdi-chart-line",-1)])]),_:1}),e[16]||(e[16]=t("span",{class:"text-h6 text-white ml-3"},"Relatórios detalhados",-1))])]),_:1}),s(m,{cols:"12"},{default:o(()=>[t("div",j,[s(d,{color:"white",size:"30"},{default:o(()=>[...e[17]||(e[17]=[a("mdi-shield-check",-1)])]),_:1}),e[18]||(e[18]=t("span",{class:"text-h6 text-white ml-3"},"Segurança garantida",-1))])]),_:1})]),_:1})])])]),_:1}),s(m,{class:"d-flex align-center justify-center",cols:"12",lg:"7"},{default:o(()=>[t("div",D,[s(T,{class:"pa-8 elevation-12","max-width":"600",width:"100%"},{default:o(()=>[t("div",F,[s(E,{class:"mb-4",color:"primary",size:"80"},{default:o(()=>[s(d,{color:"white",size:"50"},{default:o(()=>[...e[21]||(e[21]=[a("mdi-account-plus",-1)])]),_:1})]),_:1}),e[22]||(e[22]=t("h2",{class:"text-h3 font-weight-bold mb-2"}," Criar Conta ",-1)),e[23]||(e[23]=t("p",{class:"text-body-1 text-grey"}," Preencha os dados abaixo para se cadastrar ",-1))]),s(A,{ref:"formRef",modelValue:r.valid,"onUpdate:modelValue":e[10]||(e[10]=i=>r.valid=i),onSubmit:g(n.handleRegister,["prevent"])},{default:o(()=>[t("div",G,[t("h3",J,[s(d,{class:"mr-2"},{default:o(()=>[...e[24]||(e[24]=[a("mdi-account-circle",-1)])]),_:1}),e[25]||(e[25]=a(" Informações Pessoais ",-1))]),s(p,null,{default:o(()=>[s(m,{cols:"12"},{default:o(()=>[s(c,{modelValue:r.name,"onUpdate:modelValue":e[0]||(e[0]=i=>r.name=i),color:"primary",density:"comfortable","hide-details":"auto",label:"Nome completo","prepend-inner-icon":"mdi-account",required:"",rules:n.nameRules,variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(m,{cols:"12"},{default:o(()=>[s(c,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=i=>r.email=i),color:"primary",density:"comfortable","hide-details":"auto",label:"E-mail","prepend-inner-icon":"mdi-email",required:"",rules:n.emailRules,type:"email",variant:"outlined"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),s(v,{class:"my-6"}),t("div",L,[t("h3",M,[s(d,{class:"mr-2"},{default:o(()=>[...e[26]||(e[26]=[a("mdi-shield-lock",-1)])]),_:1}),e[27]||(e[27]=a(" Informações de Acesso ",-1))]),s(p,null,{default:o(()=>[s(m,{cols:"12",md:"6"},{default:o(()=>[s(c,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=i=>r.password=i),"append-inner-icon":r.showPassword?"mdi-eye":"mdi-eye-off",color:"primary",density:"comfortable","hide-details":"auto",label:"Senha","prepend-inner-icon":"mdi-lock",required:"",rules:n.passwordRules,type:r.showPassword?"text":"password",variant:"outlined","onClick:appendInner":e[3]||(e[3]=i=>r.showPassword=!r.showPassword)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1}),s(m,{cols:"12",md:"6"},{default:o(()=>[s(c,{modelValue:r.passwordConfirm,"onUpdate:modelValue":e[4]||(e[4]=i=>r.passwordConfirm=i),"append-inner-icon":r.showPasswordConfirm?"mdi-eye":"mdi-eye-off",color:"primary",density:"comfortable","hide-details":"auto",label:"Confirmar senha","prepend-inner-icon":"mdi-lock-check",required:"",rules:n.passwordConfirmRules,type:r.showPasswordConfirm?"text":"password",variant:"outlined","onClick:appendInner":e[5]||(e[5]=i=>r.showPasswordConfirm=!r.showPasswordConfirm)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1})]),_:1}),s(k,{class:"mt-3",color:"info",icon:"mdi-information",variant:"tonal"},{default:o(()=>[...e[28]||(e[28]=[a(" A senha deve ter no mínimo 6 caracteres ",-1)])]),_:1})]),s(v,{class:"my-6"}),t("div",O,[t("h3",H,[s(d,{class:"mr-2"},{default:o(()=>[...e[29]||(e[29]=[a("mdi-briefcase",-1)])]),_:1}),e[30]||(e[30]=a(" Informações Profissionais ",-1))]),s(p,null,{default:o(()=>[s(m,{cols:"12",md:"6"},{default:o(()=>[s(z,{modelValue:r.role,"onUpdate:modelValue":e[6]||(e[6]=i=>r.role=i),color:"primary",density:"comfortable","hide-details":"auto",items:["Operador","Visualizador","Gerente"],label:"Função","prepend-inner-icon":"mdi-shield-account",required:"",rules:n.roleRules,variant:"outlined"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),r.error?(h(),w(k,{key:0,class:"mb-4",closable:"",type:"error",variant:"tonal","onClick:close":e[7]||(e[7]=i=>r.error=null)},{default:o(()=>[a(y(r.error),1)]),_:1})):V("",!0),s(S,{modelValue:r.acceptTerms,"onUpdate:modelValue":e[9]||(e[9]=i=>r.acceptTerms=i),color:"primary","hide-details":"auto",rules:n.termsRules},{label:o(()=>[t("span",K,[e[31]||(e[31]=a(" Eu aceito os ",-1)),t("a",{class:"text-primary",href:"#",onClick:e[8]||(e[8]=g(()=>{},["prevent"]))},"termos e condições")])]),_:1},8,["modelValue","rules"]),s(x,{block:"",class:"mt-6 mb-4",color:"primary",disabled:!r.valid,loading:r.loading,size:"x-large",type:"submit"},{default:o(()=>[s(d,{class:"mr-2"},{default:o(()=>[...e[32]||(e[32]=[a("mdi-account-plus",-1)])]),_:1}),e[33]||(e[33]=a(" Criar Conta ",-1))]),_:1},8,["disabled","loading"]),t("div",Q,[e[36]||(e[36]=t("span",{class:"text-body-2"},"Já tem uma conta?",-1)),s(x,{color:"primary",size:"small",variant:"text",onClick:n.goToLogin},{default:o(()=>[e[35]||(e[35]=a(" Entrar agora ",-1)),s(d,{class:"ml-1",size:"small"},{default:o(()=>[...e[34]||(e[34]=[a("mdi-arrow-right",-1)])]),_:1})]),_:1},8,["onClick"])])]),_:1},8,["modelValue","onSubmit"])]),_:1})])]),_:1})]),_:1}),s(U,{modelValue:r.snackbar,"onUpdate:modelValue":e[11]||(e[11]=i=>r.snackbar=i),color:r.snackbarColor,elevation:"8",location:"top right",timeout:4e3},{default:o(()=>[t("div",W,[s(d,{class:"mr-2",icon:r.snackbarColor==="success"?"mdi-check-circle":"mdi-alert-circle",size:"large"},null,8,["icon"]),t("div",null,[t("div",X,y(r.snackbarText),1),r.snackbarColor==="success"?(h(),R("div",Y," Redirecionando para o login... ")):V("",!0)])])]),_:1},8,["modelValue","color"])]),_:1})}const fe=C(_,[["render",Z],["__scopeId","data-v-8f8b1d01"]]);export{fe as default};
