import{_,a5 as O,f as D,o as k,a as t,w as l,b as p,e as r,t as I,I as K}from"./index-2CK1TBd1.js";import{D as S,L}from"./location.service-DKpUiO2x.js";import{s as b}from"./snackbar-BTqzwliu.js";import{s as R,c as ee}from"./index-BNH3mZEl.js";import{h as c,c as f,b as h,j as x,V as te,a as le,d as V,f as oe}from"./VCard-C0Nnn3PC.js";import{a as n,V as m}from"./VTextField-Dl59xlA2.js";import{V as E}from"./VDataTable-g9Pk3cLs.js";import{V as U}from"./VForm-B5T0w2Cq.js";import{V as v}from"./VSpacer-CVnO6Leu.js";import{V as C}from"./VDialog-D3PXHU9z.js";import{V as B}from"./VChip-ijcJUYKv.js";import{V as P}from"./VSelect-BDnerYRz.js";import{C as A,S as T}from"./supplier.service-OgXXiTCw.js";import{U as M,B as q,C as N}from"./product.service-6MmcmfrT.js";import{V as ie,a as y,b as ae,c as w}from"./VTabs-DFFEQUTa.js";import"./tag-ClhzHHXz.js";import"./ssrBoot-DL-QNHNL.js";import"./filter-DzHhRroJ.js";import"./VMenu-CzW1lCu_.js";const de={name:"Depositos",mixins:[b],computed:{sharedRules(){return R},formTitle(){return this.editedIndex===-1?"Novo Depósito":"Editar Depósito"}},data(){return{loading:!1,dialog:!1,deleteDialog:!1,validForm:!1,formRef:null,depositos:[],editedIndex:-1,editedItem:{id:0,nome:"",endereco_logradouro:"",endereco_numero:"",endereco_complemento:"",endereco_cep:"",endereco_bairro:"",endereco_municipio:"",endereco_uf:""},defaultItem:{id:0,nome:"",endereco_logradouro:"",endereco_numero:"",endereco_complemento:"",endereco_cep:"",endereco_bairro:"",endereco_municipio:"",endereco_uf:""},headers:[{title:"ID",key:"id",sortable:!0},{title:"Nome",key:"nome",sortable:!0},{title:"Endereço",key:"endereco_logradouro",sortable:!0},{title:"Ações",key:"actions",sortable:!1}]}},mounted(){this.loadDepositos()},methods:{async loadDepositos(){this.loading=!0;try{this.depositos=await S.getAll()}catch{this.showError("Erro ao carregar depósitos")}finally{this.loading=!1}},openDialog(){this.dialog=!0},editItem(a){this.editedIndex=this.depositos.indexOf(a),this.editedItem={...a},this.dialog=!0},deleteItem(a){this.editedIndex=this.depositos.indexOf(a),this.editedItem={...a},this.deleteDialog=!0},async deleteItemConfirm(){try{await S.delete(this.editedItem.id),this.depositos.splice(this.editedIndex,1),this.showSuccess("Depósito excluído com sucesso!")}catch{this.showError("Erro ao excluir depósito")}this.closeDeleteDialog()},closeDialog(){this.dialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},closeDeleteDialog(){this.deleteDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},onCEPKeypress(a){const e=String.fromCodePoint(a.which);/[0-9]/.test(e)||a.preventDefault()},async save(){if(this.validForm)try{if(this.editedIndex>-1){const a=await S.update(this.editedItem.id,this.editedItem);this.depositos[this.editedIndex]=a,this.showSuccess("Depósito atualizado com sucesso!")}else{const a=await S.create(this.editedItem);this.depositos.push(a),this.showSuccess("Depósito criado com sucesso!")}this.closeDialog()}catch{this.showError("Erro ao salvar depósito")}}}},se={class:"depositos"},re={class:"text-h5"};function ne(a,e,u,g,i,o){const d=O("mask");return k(),D("div",se,[t(h,null,{default:l(()=>[t(c,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[13]||(e[13]=p("span",{class:"text-h6"},"Gerenciar Depósitos",-1)),t(n,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=s=>o.openDialog())},{default:l(()=>[...e[12]||(e[12]=[r(" Novo Depósito ",-1)])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(E,{headers:i.headers,items:i.depositos,loading:i.loading,class:"elevation-1"},{"item.actions":l(({item:s})=>[t(n,{icon:"mdi-pencil",size:"small",color:"primary",variant:"text",onClick:z=>o.editItem(s)},null,8,["onClick"]),t(n,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:z=>o.deleteItem(s)},null,8,["onClick"])]),_:2},1032,["headers","items","loading"])]),_:1})]),_:1}),t(C,{modelValue:i.dialog,"onUpdate:modelValue":e[10]||(e[10]=s=>i.dialog=s),"max-width":"600px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,null,{default:l(()=>[p("span",re,I(o.formTitle),1)]),_:1}),t(f,null,{default:l(()=>[t(U,{ref:"formRef",modelValue:i.validForm,"onUpdate:modelValue":e[9]||(e[9]=s=>i.validForm=s)},{default:l(()=>[t(m,{modelValue:i.editedItem.nome,"onUpdate:modelValue":e[1]||(e[1]=s=>i.editedItem.nome=s),label:"Nome do Depósito",rules:[o.sharedRules.required,o.sharedRules.minLength(2),o.sharedRules.maxLength(100),o.sharedRules.alfanumerico],counter:"100",required:""},null,8,["modelValue","rules"]),t(m,{modelValue:i.editedItem.endereco_logradouro,"onUpdate:modelValue":e[2]||(e[2]=s=>i.editedItem.endereco_logradouro=s),label:"Logradouro",rules:[o.sharedRules.required,o.sharedRules.minLength(5),o.sharedRules.maxLength(100),o.sharedRules.alfanumerico],counter:"100",required:""},null,8,["modelValue","rules"]),t(m,{modelValue:i.editedItem.endereco_numero,"onUpdate:modelValue":e[3]||(e[3]=s=>i.editedItem.endereco_numero=s),label:"Número",rules:[o.sharedRules.required,o.sharedRules.maxLength(20),o.sharedRules.alfanumerico],counter:"20",required:""},null,8,["modelValue","rules"]),t(m,{modelValue:i.editedItem.endereco_complemento,"onUpdate:modelValue":e[4]||(e[4]=s=>i.editedItem.endereco_complemento=s),label:"Complemento",rules:[o.sharedRules.maxLength(255)],counter:"255"},null,8,["modelValue","rules"]),K(t(m,{modelValue:i.editedItem.endereco_cep,"onUpdate:modelValue":e[5]||(e[5]=s=>i.editedItem.endereco_cep=s),label:"CEP",rules:[o.sharedRules.required,o.sharedRules.cep],onKeypress:o.onCEPKeypress,required:""},null,8,["modelValue","rules","onKeypress"]),[[d,"#####-###"]]),t(m,{modelValue:i.editedItem.endereco_bairro,"onUpdate:modelValue":e[6]||(e[6]=s=>i.editedItem.endereco_bairro=s),label:"Bairro",rules:[o.sharedRules.required,o.sharedRules.minLength(2),o.sharedRules.maxLength(150),o.sharedRules.alfanumerico],counter:"150",required:""},null,8,["modelValue","rules"]),t(m,{modelValue:i.editedItem.endereco_municipio,"onUpdate:modelValue":e[7]||(e[7]=s=>i.editedItem.endereco_municipio=s),label:"Município",rules:[o.sharedRules.required,o.sharedRules.minLength(2),o.sharedRules.maxLength(150),o.sharedRules.nome],counter:"150",required:""},null,8,["modelValue","rules"]),t(m,{modelValue:i.editedItem.endereco_uf,"onUpdate:modelValue":e[8]||(e[8]=s=>i.editedItem.endereco_uf=s),label:"UF",rules:[o.sharedRules.required,o.sharedRules.uf],maxlength:"2",counter:"2",required:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDialog},{default:l(()=>[...e[14]||(e[14]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"primary",variant:"text",disabled:!i.validForm,onClick:o.save},{default:l(()=>[...e[15]||(e[15]=[r(" Salvar ",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{modelValue:i.deleteDialog,"onUpdate:modelValue":e[11]||(e[11]=s=>i.deleteDialog=s),"max-width":"500px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,{class:"text-h5"},{default:l(()=>[...e[16]||(e[16]=[r("Confirmar Exclusão",-1)])]),_:1}),t(f,null,{default:l(()=>[r(' Tem certeza que deseja excluir o depósito "'+I(i.editedItem.nome)+'"? ',1)]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDeleteDialog},{default:l(()=>[...e[17]||(e[17]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"error",variant:"text",onClick:o.deleteItemConfirm},{default:l(()=>[...e[18]||(e[18]=[r(" Excluir ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const G=_(de,[["render",ne]]),ue={name:"Localizacoes",mixins:[b],computed:{sharedRules(){return R},formTitle(){return this.editedIndex===-1?"Nova Localização":"Editar Localização"}},data(){return{loading:!1,dialog:!1,deleteDialog:!1,validForm:!1,formRef:null,localizacoes:[],depositos:[],editedIndex:-1,editedItem:{id:0,id_deposito:0,corredor:"",prateleira:"",secao:""},defaultItem:{id:0,id_deposito:0,corredor:"",prateleira:"",secao:""},headers:[{title:"ID",key:"id",sortable:!0},{title:"Depósito",key:"deposito_nome",sortable:!0},{title:"Corredor",key:"corredor",sortable:!0},{title:"Prateleira",key:"prateleira",sortable:!0},{title:"Seção",key:"secao",sortable:!0},{title:"Ações",key:"actions",sortable:!1}]}},mounted(){this.loadData()},methods:{async loadData(){this.loading=!0;try{const[a,e]=await Promise.all([L.getAll(),S.getAll()]);this.localizacoes=a,this.depositos=e}catch{this.showError("Erro ao carregar dados")}finally{this.loading=!1}},openDialog(){this.dialog=!0},editItem(a){this.editedIndex=this.localizacoes.indexOf(a),this.editedItem={...a},this.dialog=!0},deleteItem(a){this.editedIndex=this.localizacoes.indexOf(a),this.editedItem={...a},this.deleteDialog=!0},async deleteItemConfirm(){try{await L.delete(this.editedItem.id),this.localizacoes.splice(this.editedIndex,1),this.showSuccess("Localização excluída com sucesso!")}catch{this.showError("Erro ao excluir localização")}this.closeDeleteDialog()},closeDialog(){this.dialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},closeDeleteDialog(){this.deleteDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},async save(){if(this.validForm)try{if(this.editedIndex>-1){const a=await L.update(this.editedItem.id,this.editedItem);this.localizacoes[this.editedIndex]=a,this.showSuccess("Localização atualizada com sucesso!")}else{const a=await L.create(this.editedItem);this.localizacoes.push(a),this.showSuccess("Localização criada com sucesso!")}this.closeDialog()}catch{this.showError("Erro ao salvar localização")}}}},me={class:"localizacoes"},ce={class:"text-h5"};function fe(a,e,u,g,i,o){return k(),D("div",me,[t(h,null,{default:l(()=>[t(c,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[9]||(e[9]=p("span",{class:"text-h6"},"Gerenciar Localizações",-1)),t(n,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=d=>o.openDialog())},{default:l(()=>[...e[8]||(e[8]=[r(" Nova Localização ",-1)])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(E,{headers:i.headers,items:i.localizacoes,loading:i.loading,class:"elevation-1"},{"item.deposito_nome":l(({item:d})=>[t(B,{color:"info",variant:"outlined"},{default:l(()=>[r(I(d.deposito_nome),1)]),_:2},1024)]),"item.actions":l(({item:d})=>[t(n,{icon:"mdi-pencil",size:"small",color:"primary",variant:"text",onClick:s=>o.editItem(d)},null,8,["onClick"]),t(n,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:s=>o.deleteItem(d)},null,8,["onClick"])]),_:2},1032,["headers","items","loading"])]),_:1})]),_:1}),t(C,{modelValue:i.dialog,"onUpdate:modelValue":e[6]||(e[6]=d=>i.dialog=d),"max-width":"600px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,null,{default:l(()=>[p("span",ce,I(o.formTitle),1)]),_:1}),t(f,null,{default:l(()=>[t(U,{ref:"formRef",modelValue:i.validForm,"onUpdate:modelValue":e[5]||(e[5]=d=>i.validForm=d)},{default:l(()=>[t(P,{modelValue:i.editedItem.id_deposito,"onUpdate:modelValue":e[1]||(e[1]=d=>i.editedItem.id_deposito=d),items:i.depositos,"item-title":"nome","item-value":"id",label:"Depósito",rules:[o.sharedRules.required],required:""},null,8,["modelValue","items","rules"]),t(m,{modelValue:i.editedItem.corredor,"onUpdate:modelValue":e[2]||(e[2]=d=>i.editedItem.corredor=d),label:"Corredor",rules:[o.sharedRules.maxLength(50),o.sharedRules.alfanumerico],counter:"50"},null,8,["modelValue","rules"]),t(m,{modelValue:i.editedItem.prateleira,"onUpdate:modelValue":e[3]||(e[3]=d=>i.editedItem.prateleira=d),label:"Prateleira",rules:[o.sharedRules.maxLength(50),o.sharedRules.alfanumerico],counter:"50"},null,8,["modelValue","rules"]),t(m,{modelValue:i.editedItem.secao,"onUpdate:modelValue":e[4]||(e[4]=d=>i.editedItem.secao=d),label:"Seção",rules:[o.sharedRules.maxLength(50),o.sharedRules.alfanumerico],counter:"50"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDialog},{default:l(()=>[...e[10]||(e[10]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"primary",variant:"text",disabled:!i.validForm,onClick:o.save},{default:l(()=>[...e[11]||(e[11]=[r(" Salvar ",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{modelValue:i.deleteDialog,"onUpdate:modelValue":e[7]||(e[7]=d=>i.deleteDialog=d),"max-width":"500px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,{class:"text-h5"},{default:l(()=>[...e[12]||(e[12]=[r("Confirmar Exclusão",-1)])]),_:1}),t(f,null,{default:l(()=>[...e[13]||(e[13]=[r(" Tem certeza que deseja excluir esta localização? ",-1)])]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDeleteDialog},{default:l(()=>[...e[14]||(e[14]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"error",variant:"text",onClick:o.deleteItemConfirm},{default:l(()=>[...e[15]||(e[15]=[r(" Excluir ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const J=_(ue,[["render",fe]]),F=()=>({id:0,nome:"",cnpj:"",contato_id:null,contato_nome:"",contato_valor:"",contato_tipo:"telefone"}),he={name:"Fornecedores",mixins:[b],computed:{sharedRules(){return R}},data(){return{loading:!1,saving:!1,dialog:!1,deleteDialog:!1,validForm:!1,formRef:null,fornecedores:[],editedIndex:-1,editedItem:F(),defaultItem:F(),headers:[{title:"ID",key:"id",sortable:!0},{title:"Nome",key:"nome",sortable:!0},{title:"CNPJ",key:"cnpj",sortable:!0},{title:"Contato",key:"contato_nome",sortable:!0},{title:"Ações",key:"actions",sortable:!1}],tipoContatoOptions:[{title:"Telefone",value:"telefone"},{title:"Email",value:"email"},{title:"WhatsApp",value:"whatsapp"},{title:"Instagram",value:"instagram"},{title:"Telegram",value:"telegram"},{title:"Outro",value:"outro"}]}},mounted(){this.loadFornecedores()},methods:{async loadFornecedores(){this.loading=!0;try{const a=await T.getAllEnriched();this.fornecedores=a.map(e=>({...e,cnpj:e.cnpj??"",contato_id:e.contato?.id??null,contato_nome:e.contato?.nome??"",contato_valor:e.contato?.valor??"",contato_tipo:e.contato?.tipo_contato??"telefone"}))}catch{this.showError("Erro ao carregar fornecedores")}finally{this.loading=!1}},openDialog(){this.dialog=!0,this.$nextTick(()=>{this.editedItem=F(),this.validForm=!1})},editItem(a){this.editedIndex=this.fornecedores.indexOf(a),this.editedItem={id:a.id,nome:a.nome,cnpj:a.cnpj??"",contato_id:a.contato_id??null,contato_nome:a.contato_nome??"",contato_valor:a.contato_valor??"",contato_tipo:a.contato_tipo??"telefone"},this.dialog=!0},deleteItem(a){this.editedIndex=this.fornecedores.indexOf(a),this.editedItem={id:a.id,nome:a.nome,cnpj:a.cnpj??"",contato_id:a.contato_id??null,contato_nome:a.contato_nome??"",contato_valor:a.contato_valor??"",contato_tipo:a.contato_tipo??"telefone"},this.deleteDialog=!0},async deleteItemConfirm(){try{await T.delete(this.editedItem.id),this.fornecedores.splice(this.editedIndex,1),this.showSuccess("Fornecedor excluído com sucesso!")}catch{this.showError("Erro ao excluir fornecedor")}this.closeDeleteDialog()},closeDialog(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=F(),this.editedIndex=-1,this.validForm=!1,this.formRef&&this.formRef.reset()})},closeDeleteDialog(){this.deleteDialog=!1,this.$nextTick(()=>{this.editedItem=F(),this.editedIndex=-1})},sanitizeCnpj(a){if(!a)return"";const e=a.replace(/\D/g,"");return e.length!==14?a.trim():`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8,12)}-${e.slice(12)}`},buildContactPayload(){const{contato_nome:a,contato_valor:e,contato_tipo:u}=this.editedItem;if(!a||!e)return null;const g=u==="telefone"||u==="whatsapp"?e.replace(/\D/g,""):e.trim();return{nome:a.trim(),valor:g,tipo_contato:u,codigo_pais:u==="telefone"||u==="whatsapp"?"55":null}},getContactMask(a){switch(a){case"telefone":case"whatsapp":return"(##) #####-####";default:return""}},formatContactValue(a){const u=a.target.value,g=this.editedItem.contato_tipo;if(g==="telefone"||g==="whatsapp"){const o=u.replace(/\D/g,"").slice(0,11);o.length<=2?this.editedItem.contato_valor=o:o.length<=6?this.editedItem.contato_valor=`(${o.slice(0,2)}) ${o.slice(2)}`:o.length<=10?this.editedItem.contato_valor=`(${o.slice(0,2)}) ${o.slice(2,6)}-${o.slice(6)}`:this.editedItem.contato_valor=`(${o.slice(0,2)}) ${o.slice(2,7)}-${o.slice(7)}`}else this.editedItem.contato_valor=u.slice(0,100)},onContactKeypress(a){const e=this.editedItem.contato_tipo;if(e==="telefone"||e==="whatsapp"){const u=String.fromCodePoint(a.which);/[0-9]/.test(u)||a.preventDefault()}},onCNPJKeypress(a){const e=String.fromCodePoint(a.which);/[0-9]/.test(e)||a.preventDefault()},async save(){if(!(!this.validForm||this.saving)){this.saving=!0;try{const a=this.sanitizeCnpj(this.editedItem.cnpj),e=this.buildContactPayload();let u=this.editedItem.contato_id??null;e&&(u?await A.update(u,e):u=(await A.create(e)).id);const g={nome:this.editedItem.nome.trim(),cnpj:a||void 0,id_contato:u??void 0};this.editedIndex>-1?(await T.update(this.editedItem.id,g),this.showSuccess("Fornecedor atualizado com sucesso!")):(await T.create(g),this.showSuccess("Fornecedor criado com sucesso!")),await this.loadFornecedores(),this.closeDialog()}catch{this.showError("Erro ao salvar fornecedor")}finally{this.saving=!1}}}}},ge={class:"fornecedores"},pe={class:"text-h5"};function Ie(a,e,u,g,i,o){const d=O("mask");return k(),D("div",ge,[t(h,null,{default:l(()=>[t(c,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[10]||(e[10]=p("span",{class:"text-h6"},"Gerenciar Fornecedores",-1)),t(n,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=s=>o.openDialog())},{default:l(()=>[...e[9]||(e[9]=[r(" Novo Fornecedor ",-1)])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(E,{headers:i.headers,items:i.fornecedores,loading:i.loading,class:"elevation-1"},{"item.actions":l(({item:s})=>[t(n,{icon:"mdi-pencil",size:"small",color:"primary",variant:"text",onClick:z=>o.editItem(s)},null,8,["onClick"]),t(n,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:z=>o.deleteItem(s)},null,8,["onClick"])]),_:2},1032,["headers","items","loading"])]),_:1})]),_:1}),t(C,{modelValue:i.dialog,"onUpdate:modelValue":e[7]||(e[7]=s=>i.dialog=s),"max-width":"600px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,null,{default:l(()=>[p("span",pe,I(a.formTitle),1)]),_:1}),t(f,null,{default:l(()=>[t(U,{ref:"formRef",modelValue:i.validForm,"onUpdate:modelValue":e[6]||(e[6]=s=>i.validForm=s)},{default:l(()=>[t(m,{modelValue:i.editedItem.nome,"onUpdate:modelValue":e[1]||(e[1]=s=>i.editedItem.nome=s),label:"Nome do Fornecedor",rules:[o.sharedRules.required,o.sharedRules.minLength(2),o.sharedRules.maxLength(150),o.sharedRules.nome],counter:"150",required:""},null,8,["modelValue","rules"]),K(t(m,{modelValue:i.editedItem.cnpj,"onUpdate:modelValue":e[2]||(e[2]=s=>i.editedItem.cnpj=s),label:"CNPJ",rules:[o.sharedRules.cnpj],onKeypress:o.onCNPJKeypress},null,8,["modelValue","rules","onKeypress"]),[[d,"##.###.###/####-##"]]),t(m,{modelValue:i.editedItem.contato_nome,"onUpdate:modelValue":e[3]||(e[3]=s=>i.editedItem.contato_nome=s),label:"Nome do Contato",rules:[o.sharedRules.required,o.sharedRules.minLength(2),o.sharedRules.maxLength(255),o.sharedRules.nome],counter:"255",required:""},null,8,["modelValue","rules"]),t(m,{modelValue:i.editedItem.contato_valor,"onUpdate:modelValue":e[4]||(e[4]=s=>i.editedItem.contato_valor=s),label:"Telefone/Email",rules:[o.sharedRules.required,o.sharedRules.minLength(8),o.sharedRules.maxLength(50)],counter:"50",mask:o.getContactMask(i.editedItem.contato_tipo),onInput:o.formatContactValue,onKeypress:o.onContactKeypress,required:""},null,8,["modelValue","rules","mask","onInput","onKeypress"]),t(P,{modelValue:i.editedItem.contato_tipo,"onUpdate:modelValue":e[5]||(e[5]=s=>i.editedItem.contato_tipo=s),items:i.tipoContatoOptions,label:"Tipo de Contato",rules:[o.sharedRules.required],required:""},null,8,["modelValue","items","rules"])]),_:1},8,["modelValue"])]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDialog},{default:l(()=>[...e[11]||(e[11]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"primary",variant:"text",disabled:!i.validForm,onClick:o.save},{default:l(()=>[...e[12]||(e[12]=[r(" Salvar ",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{modelValue:i.deleteDialog,"onUpdate:modelValue":e[8]||(e[8]=s=>i.deleteDialog=s),"max-width":"500px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,{class:"text-h5"},{default:l(()=>[...e[13]||(e[13]=[r("Confirmar Exclusão",-1)])]),_:1}),t(f,null,{default:l(()=>[r(' Tem certeza que deseja excluir o fornecedor "'+I(i.editedItem.nome)+'"? ',1)]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDeleteDialog},{default:l(()=>[...e[14]||(e[14]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"error",variant:"text",onClick:o.deleteItemConfirm},{default:l(()=>[...e[15]||(e[15]=[r(" Excluir ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const W=_(he,[["render",Ie]]),xe={name:"UnidadesMedida",mixins:[b],computed:{sharedRules(){return R},formTitle(){return this.editedIndex===-1?"Nova Unidade de Medida":"Editar Unidade de Medida"}},data(){return{loading:!1,dialog:!1,validForm:!1,formRef:null,unidades:[],editedIndex:-1,editedItem:{id:0,descricao:"",abreviacao:"un"},defaultItem:{id:0,descricao:"",abreviacao:"un"},headers:[{title:"ID",key:"id",sortable:!0},{title:"Descrição",key:"descricao",sortable:!0},{title:"Abreviação",key:"abreviacao",sortable:!0},{title:"Ações",key:"actions",sortable:!1}],unidadeOptions:[{title:"Unidade",value:"un"},{title:"Quilograma",value:"kg"},{title:"Litro",value:"L"},{title:"Pacote",value:"pac"},{title:"Caixa",value:"cx"},{title:"Grama",value:"g"},{title:"Mililitro",value:"ml"}]}},mounted(){this.loadUnidades()},methods:{async loadUnidades(){this.loading=!0;try{this.unidades=await M.getAll()}catch{this.showError("Erro ao carregar unidades de medida")}finally{this.loading=!1}},openDialog(){this.dialog=!0},editItem(a){this.editedIndex=this.unidades.indexOf(a),this.editedItem={...a},this.dialog=!0},closeDialog(){this.dialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},async save(){if(this.validForm)try{if(this.editedIndex>-1){const a=await M.update(this.editedItem.id,this.editedItem);this.unidades[this.editedIndex]=a,this.showSuccess("Unidade de medida atualizada com sucesso!")}else{const a=await M.create(this.editedItem);this.unidades.push(a),this.showSuccess("Unidade de medida criada com sucesso!")}this.closeDialog()}catch{this.showError("Erro ao salvar unidade de medida")}}}},ve={class:"unidades-medida"},Ce={class:"text-h5"};function Ve(a,e,u,g,i,o){return k(),D("div",ve,[t(h,null,{default:l(()=>[t(c,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[6]||(e[6]=p("span",{class:"text-h6"},"Gerenciar Unidades de Medida",-1)),t(n,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=d=>o.openDialog())},{default:l(()=>[...e[5]||(e[5]=[r(" Nova Unidade ",-1)])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(E,{headers:i.headers,items:i.unidades,loading:i.loading,class:"elevation-1"},{"item.abreviacao":l(({item:d})=>[t(B,{color:"primary",variant:"outlined"},{default:l(()=>[r(I(d.abreviacao),1)]),_:2},1024)]),"item.actions":l(({item:d})=>[t(n,{icon:"mdi-pencil",size:"small",color:"primary",variant:"text",onClick:s=>o.editItem(d)},null,8,["onClick"])]),_:2},1032,["headers","items","loading"])]),_:1})]),_:1}),t(C,{modelValue:i.dialog,"onUpdate:modelValue":e[4]||(e[4]=d=>i.dialog=d),"max-width":"500px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,null,{default:l(()=>[p("span",Ce,I(o.formTitle),1)]),_:1}),t(f,null,{default:l(()=>[t(U,{ref:"formRef",modelValue:i.validForm,"onUpdate:modelValue":e[3]||(e[3]=d=>i.validForm=d)},{default:l(()=>[t(m,{modelValue:i.editedItem.descricao,"onUpdate:modelValue":e[1]||(e[1]=d=>i.editedItem.descricao=d),label:"Descrição",rules:[o.sharedRules.required,o.sharedRules.minLength(2),o.sharedRules.maxLength(50),o.sharedRules.alfanumerico],counter:"50",required:""},null,8,["modelValue","rules"]),t(P,{modelValue:i.editedItem.abreviacao,"onUpdate:modelValue":e[2]||(e[2]=d=>i.editedItem.abreviacao=d),items:i.unidadeOptions,label:"Abreviação",rules:[o.sharedRules.required],required:""},null,8,["modelValue","items","rules"])]),_:1},8,["modelValue"])]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDialog},{default:l(()=>[...e[7]||(e[7]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"primary",variant:"text",disabled:!i.validForm,onClick:o.save},{default:l(()=>[...e[8]||(e[8]=[r(" Salvar ",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Q=_(xe,[["render",Ve]]),_e={name:"Marcas",mixins:[b],computed:{sharedRules(){return R},formTitle(){return this.editedIndex===-1?"Nova Marca":"Editar Marca"}},data(){return{loading:!1,dialog:!1,deleteDialog:!1,validForm:!1,formRef:null,marcas:[],editedIndex:-1,editedItem:{id:0,nome:""},defaultItem:{id:0,nome:""},headers:[{title:"ID",key:"id",sortable:!0},{title:"Nome",key:"nome",sortable:!0},{title:"Ações",key:"actions",sortable:!1}]}},mounted(){this.loadMarcas()},methods:{async loadMarcas(){this.loading=!0;try{this.marcas=await q.getAll()}catch{this.showError("Erro ao carregar marcas")}finally{this.loading=!1}},openDialog(){this.dialog=!0},editItem(a){this.editedIndex=this.marcas.indexOf(a),this.editedItem={...a},this.dialog=!0},deleteItem(a){this.editedIndex=this.marcas.indexOf(a),this.editedItem={...a},this.deleteDialog=!0},async deleteItemConfirm(){try{await q.delete(this.editedItem.id),this.marcas.splice(this.editedIndex,1),this.showSuccess("Marca excluída com sucesso!")}catch{this.showError("Erro ao excluir marca")}this.closeDeleteDialog()},closeDialog(){this.dialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},closeDeleteDialog(){this.deleteDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},async save(){if(this.validForm)try{if(this.editedIndex>-1){const a=await q.update(this.editedItem.id,this.editedItem);this.marcas[this.editedIndex]=a,this.showSuccess("Marca atualizada com sucesso!")}else{const a=await q.create(this.editedItem);this.marcas.push(a),this.showSuccess("Marca criada com sucesso!")}this.closeDialog()}catch{this.showError("Erro ao salvar marca")}}}},De={class:"marcas"},ke={class:"text-h5"};function ye(a,e,u,g,i,o){return k(),D("div",De,[t(h,null,{default:l(()=>[t(c,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[6]||(e[6]=p("span",{class:"text-h6"},"Gerenciar Marcas",-1)),t(n,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=d=>o.openDialog())},{default:l(()=>[...e[5]||(e[5]=[r(" Nova Marca ",-1)])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(E,{headers:i.headers,items:i.marcas,loading:i.loading,class:"elevation-1"},{"item.actions":l(({item:d})=>[t(n,{icon:"mdi-pencil",size:"small",color:"primary",variant:"text",onClick:s=>o.editItem(d)},null,8,["onClick"]),t(n,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:s=>o.deleteItem(d)},null,8,["onClick"])]),_:2},1032,["headers","items","loading"])]),_:1})]),_:1}),t(C,{modelValue:i.dialog,"onUpdate:modelValue":e[3]||(e[3]=d=>i.dialog=d),"max-width":"500px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,null,{default:l(()=>[p("span",ke,I(o.formTitle),1)]),_:1}),t(f,null,{default:l(()=>[t(U,{ref:"formRef",modelValue:i.validForm,"onUpdate:modelValue":e[2]||(e[2]=d=>i.validForm=d)},{default:l(()=>[t(m,{modelValue:i.editedItem.nome,"onUpdate:modelValue":e[1]||(e[1]=d=>i.editedItem.nome=d),label:"Nome da Marca",rules:[o.sharedRules.required,o.sharedRules.minLength(2),o.sharedRules.maxLength(100),o.sharedRules.nome],counter:"100",required:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDialog},{default:l(()=>[...e[7]||(e[7]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"primary",variant:"text",disabled:!i.validForm,onClick:o.save},{default:l(()=>[...e[8]||(e[8]=[r(" Salvar ",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{modelValue:i.deleteDialog,"onUpdate:modelValue":e[4]||(e[4]=d=>i.deleteDialog=d),"max-width":"500px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,{class:"text-h5"},{default:l(()=>[...e[9]||(e[9]=[r("Confirmar Exclusão",-1)])]),_:1}),t(f,null,{default:l(()=>[r(' Tem certeza que deseja excluir a marca "'+I(i.editedItem.nome)+'"? ',1)]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDeleteDialog},{default:l(()=>[...e[10]||(e[10]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"error",variant:"text",onClick:o.deleteItemConfirm},{default:l(()=>[...e[11]||(e[11]=[r(" Excluir ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const H=_(_e,[["render",ye]]),we={name:"Categorias",mixins:[b],computed:{formTitle(){return this.editedIndex===-1?"Nova Categoria":"Editar Categoria"},categoriaRules(){return ee},sharedRules(){return R}},data(){return{loading:!1,dialog:!1,deleteDialog:!1,validForm:!1,formRef:null,categorias:[],editedIndex:-1,editedItem:{id:0,nome:""},defaultItem:{id:0,nome:""},headers:[{title:"ID",key:"id",sortable:!0},{title:"Nome",key:"nome",sortable:!0},{title:"Ações",key:"actions",sortable:!1}]}},mounted(){this.loadCategorias()},methods:{async loadCategorias(){this.loading=!0;try{this.categorias=await N.getAll()}catch{this.showError("Erro ao carregar categorias")}finally{this.loading=!1}},openDialog(){this.dialog=!0},editItem(a){this.editedIndex=this.categorias.indexOf(a),this.editedItem={...a},this.dialog=!0},deleteItem(a){this.editedIndex=this.categorias.indexOf(a),this.editedItem={...a},this.deleteDialog=!0},async deleteItemConfirm(){try{await N.delete(this.editedItem.id),this.categorias.splice(this.editedIndex,1),this.showSuccess("Categoria excluída com sucesso!")}catch{this.showError("Erro ao excluir categoria")}this.closeDeleteDialog()},closeDialog(){this.dialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},closeDeleteDialog(){this.deleteDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},async save(){if(this.validForm)try{if(this.editedIndex>-1){const a=await N.update(this.editedItem.id,this.editedItem);this.categorias[this.editedIndex]=a,this.showSuccess("Categoria atualizada com sucesso!")}else{const a=await N.create(this.editedItem);this.categorias.push(a),this.showSuccess("Categoria criada com sucesso!")}this.closeDialog()}catch{this.showError("Erro ao salvar categoria")}}}},be={class:"categorias"},Re={class:"text-h5"};function Ee(a,e,u,g,i,o){return k(),D("div",be,[t(h,null,{default:l(()=>[t(c,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[6]||(e[6]=p("span",{class:"text-h6"},"Gerenciar Categorias",-1)),t(n,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=d=>o.openDialog())},{default:l(()=>[...e[5]||(e[5]=[r(" Nova Categoria ",-1)])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(E,{headers:i.headers,items:i.categorias,loading:i.loading,class:"elevation-1"},{"item.actions":l(({item:d})=>[t(n,{icon:"mdi-pencil",size:"small",color:"primary",variant:"text",onClick:s=>o.editItem(d)},null,8,["onClick"]),t(n,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:s=>o.deleteItem(d)},null,8,["onClick"])]),_:2},1032,["headers","items","loading"])]),_:1})]),_:1}),t(C,{modelValue:i.dialog,"onUpdate:modelValue":e[3]||(e[3]=d=>i.dialog=d),"max-width":"500px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,null,{default:l(()=>[p("span",Re,I(o.formTitle),1)]),_:1}),t(f,null,{default:l(()=>[t(U,{ref:"formRef",modelValue:i.validForm,"onUpdate:modelValue":e[2]||(e[2]=d=>i.validForm=d)},{default:l(()=>[t(m,{modelValue:i.editedItem.nome,"onUpdate:modelValue":e[1]||(e[1]=d=>i.editedItem.nome=d),label:"Nome da Categoria",rules:[o.sharedRules.required,o.sharedRules.minLength(2),o.sharedRules.maxLength(100),o.categoriaRules.nome],counter:"100",required:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDialog},{default:l(()=>[...e[7]||(e[7]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"primary",variant:"text",disabled:!i.validForm,onClick:o.save},{default:l(()=>[...e[8]||(e[8]=[r(" Salvar ",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{modelValue:i.deleteDialog,"onUpdate:modelValue":e[4]||(e[4]=d=>i.deleteDialog=d),"max-width":"500px"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,{class:"text-h5"},{default:l(()=>[...e[9]||(e[9]=[r("Confirmar Exclusão",-1)])]),_:1}),t(f,null,{default:l(()=>[r(' Tem certeza que deseja excluir a categoria "'+I(i.editedItem.nome)+'"? ',1)]),_:1}),t(x,null,{default:l(()=>[t(v),t(n,{color:"grey",variant:"text",onClick:o.closeDeleteDialog},{default:l(()=>[...e[10]||(e[10]=[r(" Cancelar ",-1)])]),_:1},8,["onClick"]),t(n,{color:"error",variant:"text",onClick:o.deleteItemConfirm},{default:l(()=>[...e[11]||(e[11]=[r(" Excluir ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const X=_(we,[["render",Ee]]),Ue={name:"ConfiguracoesPage",components:{Categorias:X,Depositos:G,Fornecedores:W,Localizacoes:J,Marcas:H,UnidadesMedida:Q},data(){return{tab:"categorias"}}},ze={class:"configuracoes-page"};function Fe(a,e,u,g,i,o){const d=X,s=H,z=Q,Y=W,Z=J,$=G;return k(),D("div",ze,[t(oe,{fluid:""},{default:l(()=>[t(te,null,{default:l(()=>[t(le,{cols:"12"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,{class:"d-flex align-center"},{default:l(()=>[t(V,{class:"mr-3",color:"primary"},{default:l(()=>[...e[2]||(e[2]=[r("mdi-cog",-1)])]),_:1}),e[3]||(e[3]=p("span",{class:"text-h5"},"Configurações do Sistema",-1))]),_:1}),t(f,null,{default:l(()=>[t(ie,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=j=>i.tab=j),"align-tabs":"start",class:"mb-4",color:"primary"},{default:l(()=>[t(y,{value:"categorias"},{default:l(()=>[t(V,{class:"mr-2"},{default:l(()=>[...e[4]||(e[4]=[r("mdi-tag-multiple",-1)])]),_:1}),e[5]||(e[5]=r(" Categorias ",-1))]),_:1}),t(y,{value:"marcas"},{default:l(()=>[t(V,{class:"mr-2"},{default:l(()=>[...e[6]||(e[6]=[r("mdi-tag",-1)])]),_:1}),e[7]||(e[7]=r(" Marcas ",-1))]),_:1}),t(y,{value:"unidades"},{default:l(()=>[t(V,{class:"mr-2"},{default:l(()=>[...e[8]||(e[8]=[r("mdi-scale-balance",-1)])]),_:1}),e[9]||(e[9]=r(" Unidades de Medida ",-1))]),_:1}),t(y,{value:"fornecedores"},{default:l(()=>[t(V,{class:"mr-2"},{default:l(()=>[...e[10]||(e[10]=[r("mdi-truck-delivery",-1)])]),_:1}),e[11]||(e[11]=r(" Fornecedores ",-1))]),_:1}),t(y,{value:"localizacoes"},{default:l(()=>[t(V,{class:"mr-2"},{default:l(()=>[...e[12]||(e[12]=[r("mdi-map-marker",-1)])]),_:1}),e[13]||(e[13]=r(" Localizações ",-1))]),_:1}),t(y,{value:"depositos"},{default:l(()=>[t(V,{class:"mr-2"},{default:l(()=>[...e[14]||(e[14]=[r("mdi-warehouse",-1)])]),_:1}),e[15]||(e[15]=r(" Depósitos ",-1))]),_:1})]),_:1},8,["modelValue"]),t(ae,{modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=j=>i.tab=j)},{default:l(()=>[t(w,{value:"categorias"},{default:l(()=>[t(d)]),_:1}),t(w,{value:"marcas"},{default:l(()=>[t(s)]),_:1}),t(w,{value:"unidades"},{default:l(()=>[t(z)]),_:1}),t(w,{value:"fornecedores"},{default:l(()=>[t(Y)]),_:1}),t(w,{value:"localizacoes"},{default:l(()=>[t(Z)]),_:1}),t(w,{value:"depositos"},{default:l(()=>[t($)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const Ze=_(Ue,[["render",Fe],["__scopeId","data-v-6f10161c"]]);export{Ze as default};
