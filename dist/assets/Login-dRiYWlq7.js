import{d as g,A as h,u as V,_ as w,f as v,o as m,a as o,w as s,b as l,e as t,g as y,c as U,h as E,t as I}from"./index-2CK1TBd1.js";import{U as S}from"./uf.service-4XAjrsu0.js";import{b as u}from"./route-block-B_A1xBdJ.js";import{V as p,a as i,d as k,b as $,f as C}from"./VCard-C0Nnn3PC.js";import{V as R}from"./VForm-B5T0w2Cq.js";import{V as f,a as q}from"./VTextField-Dl59xlA2.js";import{V as A}from"./VSelect-BDnerYRz.js";import{V as B}from"./VCheckbox-CZ8kdPZl.js";import{V as L}from"./VAlert-B24Zed_l.js";import"./tag-ClhzHHXz.js";import"./ssrBoot-DL-QNHNL.js";import"./VMenu-CzW1lCu_.js";import"./VChip-ijcJUYKv.js";const c=g({name:"LoginPage",data(){return{formRef:null,valid:!1,email:"",password:"",selectedUfId:null,rememberMe:!1,showPassword:!1,loading:!1,error:null,ufs:[]}},computed:{ufOptions(){return this.ufs.map(e=>({id:e.id,label:`${e.sigla} - ${e.nome}`}))},emailRules(){return[e=>!!e||"E-mail é obrigatório",e=>/.+@.+\..+/.test(e)||"E-mail deve ser válido"]},passwordRules(){return[e=>!!e||"Senha é obrigatória",e=>e.length>=6||"Senha deve ter no mínimo 6 caracteres"]}},async mounted(){try{this.ufs=await S.getAll()}catch(e){console.error("Erro ao carregar UFs:",e),this.error="Erro ao carregar estados. Tente novamente."}},methods:{async handleLogin(){if(!(!this.valid||!this.selectedUfId)){this.loading=!0,this.error=null;try{const e=await h.login(this.email,this.password),a=this.ufs.find(d=>d.id===this.selectedUfId),n=a?`${a.sigla} - ${a.nome}`:"";this.rememberMe&&(localStorage.setItem("rememberMe","true"),localStorage.setItem("userEmail",this.email)),V().setAuth({name:e.nome,email:e.email,ufId:this.selectedUfId,ufLabel:n,role:e.role||"estoquista"}),this.$router.push("/")}catch(e){this.error="Erro ao fazer login. Verifique suas credenciais e tente novamente.",console.error("Erro no login:",e)}finally{this.loading=!1}}}}}),M={class:"login-page"},P={class:"branding-section"},F={class:"branding-content"},N={class:"login-form-wrapper"};function z(e,a,n,b,d,T){return m(),v("div",M,[o(C,{class:"fill-height pa-0",fluid:""},{default:s(()=>[o(p,{class:"fill-height","no-gutters":""},{default:s(()=>[o(i,{class:"d-none d-md-flex",cols:"12",md:"6"},{default:s(()=>[l("div",P,[l("div",F,[o(k,{class:"mb-6",color:"white",size:"80"},{default:s(()=>[...a[7]||(a[7]=[t("mdi-package-variant",-1)])]),_:1}),a[8]||(a[8]=l("h1",{class:"text-h2 font-weight-bold text-white mb-4"}," Estoque ",-1)),a[9]||(a[9]=l("p",{class:"text-h6 text-white opacity-90"}," Gerencie seu inventário com eficiência e simplicidade ",-1))])])]),_:1}),o(i,{class:"d-flex align-center justify-center",cols:"12",md:"6"},{default:s(()=>[l("div",N,[o($,{class:"pa-8",flat:"","max-width":"450",width:"100%"},{default:s(()=>[a[11]||(a[11]=l("div",{class:"text-center mb-8"},[l("h2",{class:"text-h4 font-weight-bold mb-2"}," Bem-vindo "),l("p",{class:"text-body-1 text-medium-emphasis"}," Entre com suas credenciais ")],-1)),o(R,{ref:"formRef",modelValue:e.valid,"onUpdate:modelValue":a[6]||(a[6]=r=>e.valid=r),onSubmit:y(e.handleLogin,["prevent"])},{default:s(()=>[o(f,{modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=r=>e.email=r),class:"mb-4",color:"primary",label:"E-mail","prepend-inner-icon":"mdi-email",required:"",rules:e.emailRules,type:"email",variant:"outlined"},null,8,["modelValue","rules"]),o(f,{modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=r=>e.password=r),"append-inner-icon":e.showPassword?"mdi-eye":"mdi-eye-off",class:"mb-2",color:"primary",label:"Senha","prepend-inner-icon":"mdi-lock",required:"",rules:e.passwordRules,type:e.showPassword?"text":"password",variant:"outlined","onClick:appendInner":a[2]||(a[2]=r=>e.showPassword=!e.showPassword)},null,8,["modelValue","append-inner-icon","rules","type"]),o(A,{modelValue:e.selectedUfId,"onUpdate:modelValue":a[3]||(a[3]=r=>e.selectedUfId=r),class:"mb-4",color:"primary","item-title":"label","item-value":"id",items:e.ufOptions,label:"UF","prepend-inner-icon":"mdi-map",required:"",rules:[r=>!!r||"UF é obrigatória"],variant:"outlined"},null,8,["modelValue","items","rules"]),o(p,{class:"mb-4"},{default:s(()=>[o(i,{cols:"6"},{default:s(()=>[o(B,{modelValue:e.rememberMe,"onUpdate:modelValue":a[4]||(a[4]=r=>e.rememberMe=r),color:"primary",density:"compact","hide-details":"",label:"Lembrar-me"},null,8,["modelValue"])]),_:1})]),_:1}),e.error?(m(),U(L,{key:0,class:"mb-4",closable:"",type:"error",variant:"tonal","onClick:close":a[5]||(a[5]=r=>e.error=null)},{default:s(()=>[t(I(e.error),1)]),_:1})):E("",!0),o(q,{block:"",class:"mb-4",color:"primary",disabled:!e.valid,loading:e.loading,size:"large",type:"submit"},{default:s(()=>[...a[10]||(a[10]=[t(" Entrar ",-1)])]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue","onSubmit"])]),_:1})])]),_:1})]),_:1})]),_:1})])}typeof u=="function"&&u(c);const _=w(c,[["render",z],["__scopeId","data-v-e24521c4"]]);export{_ as default};
