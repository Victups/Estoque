import{d as G,u as W,_ as H,f as L,o as y,a as s,w as o,b as t,c as $,h as T,e as r,q as D,t as d,F as J,v as B}from"./index-2CK1TBd1.js";import{u as k}from"./index-BNH3mZEl.js";import{C as Q}from"./supplier.service-OgXXiTCw.js";import{M as X,U as Y}from"./uf.service-4XAjrsu0.js";import{U as P}from"./user.service-BRKIfIU0.js";import{g as Z,a as _,c as O,d as K}from"./user-BUxJCsVN.js";import{V as h,a as i,d as n,b as p,c as w,e as v,h as z,f as x,j as A}from"./VCard-C0Nnn3PC.js";import{a as f,V as u,c as b,l as I,n as N,o as q}from"./VTextField-Dl59xlA2.js";import{V as S}from"./VTooltip-D8FHFb_J.js";import{V as g}from"./VSelect-BDnerYRz.js";import{V as ee}from"./VDataTable-g9Pk3cLs.js";import{V as F}from"./VChip-ijcJUYKv.js";import{V as E}from"./VDialog-D3PXHU9z.js";import{V as j}from"./VForm-B5T0w2Cq.js";import{V as se}from"./VSwitch-WVqAYBdJ.js";import{V as M}from"./VSpacer-CVnO6Leu.js";import{V as ae}from"./VAlert-B24Zed_l.js";import{V as oe}from"./VSnackbar-Dyx3aGnx.js";import"./tag-ClhzHHXz.js";import"./ssrBoot-DL-QNHNL.js";import"./VMenu-CzW1lCu_.js";import"./filter-DzHhRroJ.js";const le=G({name:"UserManagementPage",data(){return{search:"",filterRole:"Todos",filterStatus:"Todos",viewDialog:!1,editDialog:!1,deleteDialog:!1,selectedUser:null,editingUser:null,snackbar:!1,snackbarText:"",snackbarColor:"success",loading:!1,saving:!1,users:[],validForm:!1,changePassword:!1,newPassword:"",confirmPassword:"",showPassword:!1,showConfirmPassword:!1,createDialog:!1,newUser:{name:"",email:"",password:"",confirmPassword:"",role:"",tipo_contato:"",valor_contato:"",codigo_pais:"+55",id_uf:null,id_municipio:null,logradouro:"",numero:"",complemento:"",cep:"",bairro:""},showNewPassword:!1,showNewConfirmPassword:!1,validCreateForm:!1,ufs:[],municipios:[],headers:[{title:"",key:"avatar",sortable:!1,width:"70px"},{title:"Nome",key:"name"},{title:"Função",key:"role"},{title:"Status",key:"status"},{title:"Ações",key:"actions",sortable:!1,width:"180px"}]}},computed:{auth(){return W()},rules(){return{required:k.required,email:k.email,minLength:k.minLength(6),passwordMatch:e=>k.passwordMatch({value:this.newPassword})(e),newPasswordMatch:e=>k.passwordMatch({value:this.newUser.password})(e)}},activeUsersCount(){return this.users.filter(e=>e.status==="active").length},adminCount(){return this.users.filter(e=>e.role==="Admin").length},filteredUsers(){return this.users.filter(e=>{const a=this.filterRole==="Todos"||e.role===this.filterRole,c=this.filterStatus==="Todos"||e.status===this.filterStatus;return a&&c})},ufOptions(){return this.ufs.map(e=>({label:`${e.sigla} - ${e.nome}`,value:e.id}))},municipioOptions(){return this.municipios.map(e=>({label:e.nome,value:e.id}))},canManageUsers(){return this.auth.role?.toLowerCase()==="admin"},canCreateUsers(){return this.auth.role?.toLowerCase()==="admin"}},mounted(){this.fetchUsers(),this.loadUfs()},methods:{async loadUfs(){try{this.ufs=await Y.getAll()}catch(e){console.error("Erro ao carregar UFs:",e)}},async loadMunicipios(e){try{this.municipios=await X.getByUf(e)}catch(a){console.error("Erro ao carregar munic�pios:",a)}},onUfChange(e){this.newUser.id_municipio=null,e?this.loadMunicipios(e):this.municipios=[]},getContactMask(e){switch(e){case"telefone":case"whatsapp":return"(##) #####-####";case"email":return"";case"instagram":case"telegram":return"";default:return""}},formatContactValue(e){const c=e.target.value,V=this.newUser.tipo_contato;if(V==="telefone"||V==="whatsapp"){const m=c.replace(/\D/g,"").slice(0,11);m.length<=2?this.newUser.valor_contato=m:m.length<=6?this.newUser.valor_contato=`(${m.slice(0,2)}) ${m.slice(2)}`:m.length<=10?this.newUser.valor_contato=`(${m.slice(0,2)}) ${m.slice(2,6)}-${m.slice(6)}`:this.newUser.valor_contato=`(${m.slice(0,2)}) ${m.slice(2,7)}-${m.slice(7)}`}else this.newUser.valor_contato=c.slice(0,100)},formatCEP(e){const U=e.target.value.replace(/\D/g,"").slice(0,8);this.newUser.cep=U.length<=5?U:`${U.slice(0,5)}-${U.slice(5)}`},onContactKeypress(e){const a=this.newUser.tipo_contato;if(a==="telefone"||a==="whatsapp"){const c=String.fromCodePoint(e.which);/[0-9]/.test(c)||e.preventDefault()}},onCEPKeypress(e){const a=String.fromCodePoint(e.which);/[0-9]/.test(a)||e.preventDefault()},async fetchUsers(){this.loading=!0;try{const e=await P.getAll();this.users=e.map((a,c)=>K(a,c)),this.snackbarText="Usuários carregados com sucesso!",this.snackbarColor="success",this.snackbar=!0}catch(e){console.error("Erro ao buscar usuários:",e),this.snackbarText="Erro ao carregar usuários",this.snackbarColor="error",this.snackbar=!0}finally{this.loading=!1}},viewUser(e){this.selectedUser=e,this.viewDialog=!0},editUser(e){this.editingUser={...e},this.changePassword=!1,this.newPassword="",this.confirmPassword="",this.editDialog=!0},cancelEdit(){this.editDialog=!1,this.editingUser=null,this.changePassword=!1,this.newPassword="",this.confirmPassword=""},async saveUser(){if(this.editingUser){this.saving=!0;try{const e={nome:this.editingUser.name||this.editingUser.nome||"",email:this.editingUser.email,role:O(this.editingUser.role||"Visualizador"),ativo:this.editingUser.status!=="inactive"};this.changePassword&&this.newPassword&&(e.senha=this.newPassword),await P.update(this.editingUser.id,e),this.snackbarText="Usuário atualizado com sucesso!",this.snackbarColor="success",this.snackbar=!0,this.editDialog=!1,this.editingUser=null,this.changePassword=!1,this.newPassword="",this.confirmPassword="",await this.fetchUsers()}catch(e){console.error("Erro ao atualizar usuário:",e),this.snackbarText="Erro ao atualizar usuário",this.snackbarColor="error",this.snackbar=!0}finally{this.saving=!1}}},toggleUserStatus(e){this.selectedUser=e,this.deleteDialog=!0},async confirmToggleStatus(){if(this.selectedUser)try{const e=this.selectedUser.status!=="active";await P.update(this.selectedUser.id,{ativo:e}),this.snackbarText=`Usuário ${this.selectedUser.name} ${e?"ativado":"inativado"} com sucesso!`,this.snackbarColor="success",this.snackbar=!0,await this.fetchUsers()}catch(e){console.error("Erro ao alterar status do usuário:",e),this.snackbarText="Erro ao alterar status do usuário",this.snackbarColor="error",this.snackbar=!0}finally{this.deleteDialog=!1,this.selectedUser=null}},goToRegistration(){this.newUser={name:"",email:"",password:"",confirmPassword:"",role:"",tipo_contato:"",valor_contato:"",codigo_pais:"+55",id_uf:null,id_municipio:null,logradouro:"",numero:"",complemento:"",cep:"",bairro:""},this.createDialog=!0},cancelCreate(){this.createDialog=!1,this.newUser={name:"",email:"",password:"",confirmPassword:"",role:"",tipo_contato:"",valor_contato:"",codigo_pais:"+55",id_uf:null,id_municipio:null,logradouro:"",numero:"",complemento:"",cep:"",bairro:""}},async createUser(){this.saving=!0;try{if(await P.emailExists(this.newUser.email)){this.snackbarText="Este e-mail já está cadastrado",this.snackbarColor="error",this.snackbar=!0;return}let a;this.newUser.tipo_contato&&this.newUser.valor_contato&&(a=(await Q.create({nome:this.newUser.name,valor:this.newUser.valor_contato,tipo_contato:this.newUser.tipo_contato,codigo_pais:this.newUser.codigo_pais||null})).id);const c=await P.create({nome:this.newUser.name,email:this.newUser.email,senha:this.newUser.password,role:O(this.newUser.role||"Visualizador"),id_contato:a,id_uf:this.newUser.id_uf??void 0,ativo:!0});this.users.push(K(c,this.users.length)),this.snackbarText="Usuário criado com sucesso!",this.snackbarColor="success",this.snackbar=!0,this.createDialog=!1,this.newUser={name:"",email:"",password:"",confirmPassword:"",role:"",tipo_contato:"",valor_contato:"",codigo_pais:"+55",id_uf:null,id_municipio:null,logradouro:"",numero:"",complemento:"",cep:"",bairro:""}}catch(e){console.error("Erro ao criar usuário:",e),this.snackbarText="Erro ao criar usuário",this.snackbarColor="error",this.snackbar=!0}finally{this.saving=!1}},getRoleColor:_,getRoleIcon:Z}}),te={class:"user-management-page"},ie={class:"d-flex justify-space-between align-center mb-4"},re={class:"text-h3 font-weight-bold mb-2"},ne={class:"d-flex align-center"},de={class:"text-h4 font-weight-bold"},ue={class:"d-flex align-center"},me={class:"text-h4 font-weight-bold"},ce={class:"d-flex align-center"},fe={class:"text-h4 font-weight-bold"},pe={class:"d-flex align-center"},we={class:"text-h4 font-weight-bold"},ge={class:"text-h6 text-white font-weight-bold"},he={class:"font-weight-bold"},ve={class:"text-caption text-grey"},Ue={class:"d-flex justify-space-between align-center"},be={class:"d-flex align-center"},Ve={class:"text-center mb-6"},Ce={class:"text-h3 text-white font-weight-bold"},ye={class:"text-h4 mb-1"},ke={class:"text-h6 text-grey"},Pe={class:"d-flex align-center"},ze={class:"text-h4 text-white"},Te={class:"d-flex align-center justify-space-between mb-2"},De={class:"text-h6"},Se={class:"d-flex align-center"},Ee={class:"text-h6 font-weight-bold mb-3"},$e={class:"text-h6 font-weight-bold mb-3"},Ae={class:"text-h6 font-weight-bold mb-3"},Ie={class:"text-h6 font-weight-bold mb-3"},Ne={class:"text-h6 font-weight-bold mb-3"},qe={class:"text-h5"},Fe={class:"text-center mb-4"},Me={class:"text-h6 text-center"},Re={class:"text-center text-grey mt-2"},Le={class:"d-flex align-center"};function Be(e,a,c,V,U,m){return y(),L("div",te,[s(x,{class:"pa-6",fluid:""},{default:o(()=>[s(h,{class:"mb-6"},{default:o(()=>[s(i,{cols:"12"},{default:o(()=>[t("div",ie,[t("div",null,[t("h1",re,[s(n,{class:"mr-3",icon:"mdi-account-group",size:"40"}),a[38]||(a[38]=r(" Gerenciamento de Usuários ",-1))]),a[39]||(a[39]=t("p",{class:"text-h6 text-grey-darken-1"}," Visualize e gerencie todos os usuários do sistema ",-1))]),s(f,{color:"primary",elevation:"2","prepend-icon":"mdi-plus",size:"large",disabled:!e.canCreateUsers,onClick:e.goToRegistration},{default:o(()=>[...a[40]||(a[40]=[r(" Novo Usuário ",-1)])]),_:1},8,["disabled","onClick"]),e.canCreateUsers?T("",!0):(y(),$(S,{key:0,location:"top",text:"Apenas administradores podem criar usuários"},{activator:o(({props:l})=>[s(n,D(l,{class:"ml-2",color:"warning",icon:"mdi-lock"}),null,16)]),_:1}))])]),_:1})]),_:1}),s(h,{class:"mb-6"},{default:o(()=>[s(i,{cols:"12",md:"3",sm:"6"},{default:o(()=>[s(p,{class:"stat-card",elevation:"3"},{default:o(()=>[s(w,null,{default:o(()=>[t("div",ne,[s(v,{class:"mr-4",color:"primary",size:"56"},{default:o(()=>[s(n,{icon:"mdi-account-multiple",size:"30"})]),_:1}),t("div",null,[a[41]||(a[41]=t("p",{class:"text-caption text-grey mb-1"},"Total de Usuários",-1)),t("h2",de,d(e.users.length),1)])])]),_:1})]),_:1})]),_:1}),s(i,{cols:"12",md:"3",sm:"6"},{default:o(()=>[s(p,{class:"stat-card",elevation:"3"},{default:o(()=>[s(w,null,{default:o(()=>[t("div",ue,[s(v,{class:"mr-4",color:"success",size:"56"},{default:o(()=>[s(n,{icon:"mdi-account-check",size:"30"})]),_:1}),t("div",null,[a[42]||(a[42]=t("p",{class:"text-caption text-grey mb-1"},"Ativos",-1)),t("h2",me,d(e.activeUsersCount),1)])])]),_:1})]),_:1})]),_:1}),s(i,{cols:"12",md:"3",sm:"6"},{default:o(()=>[s(p,{class:"stat-card",elevation:"3"},{default:o(()=>[s(w,null,{default:o(()=>[t("div",ce,[s(v,{class:"mr-4",color:"warning",size:"56"},{default:o(()=>[s(n,{icon:"mdi-shield-account",size:"30"})]),_:1}),t("div",null,[a[43]||(a[43]=t("p",{class:"text-caption text-grey mb-1"},"Administradores",-1)),t("h2",fe,d(e.adminCount),1)])])]),_:1})]),_:1})]),_:1}),s(i,{cols:"12",md:"3",sm:"6"},{default:o(()=>[s(p,{class:"stat-card",elevation:"3"},{default:o(()=>[s(w,null,{default:o(()=>[t("div",pe,[s(v,{class:"mr-4",color:"info",size:"56"},{default:o(()=>[s(n,{icon:"mdi-account-clock",size:"30"})]),_:1}),t("div",null,[a[44]||(a[44]=t("p",{class:"text-caption text-grey mb-1"},"Novos (Este mês)",-1)),t("h2",we,d(e.users.length),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),s(h,null,{default:o(()=>[s(i,{cols:"12"},{default:o(()=>[s(p,{class:"main-card",elevation:"3"},{default:o(()=>[s(z,{class:"bg-primary pa-4"},{default:o(()=>[s(n,{class:"mr-2",icon:"mdi-format-list-bulleted"}),a[45]||(a[45]=t("span",{class:"text-h5"},"Lista de Usuários",-1))]),_:1}),s(w,{class:"pa-6"},{default:o(()=>[s(h,{class:"mb-4"},{default:o(()=>[s(i,{cols:"12",md:"5"},{default:o(()=>[s(u,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=l=>e.search=l),clearable:"",density:"comfortable","hide-details":"",label:"Buscar usuários",placeholder:"Digite nome ou email...","prepend-inner-icon":"mdi-magnify",variant:"outlined"},null,8,["modelValue"])]),_:1}),s(i,{cols:"12",md:"3"},{default:o(()=>[s(g,{modelValue:e.filterRole,"onUpdate:modelValue":a[1]||(a[1]=l=>e.filterRole=l),density:"comfortable","hide-details":"",items:["Todos","Admin","Gerente","Operador","Visualizador"],label:"Filtrar por Função","prepend-inner-icon":"mdi-filter",variant:"outlined"},null,8,["modelValue"])]),_:1}),s(i,{cols:"12",md:"3"},{default:o(()=>[s(g,{modelValue:e.filterStatus,"onUpdate:modelValue":a[2]||(a[2]=l=>e.filterStatus=l),density:"comfortable","hide-details":"",items:["Todos","Ativo","Inativo"],label:"Filtrar por Status","prepend-inner-icon":"mdi-filter-variant",variant:"outlined"},null,8,["modelValue"])]),_:1}),s(i,{class:"d-flex align-center",cols:"12",md:"1"},{default:o(()=>[s(f,{color:"grey-darken-1",icon:"mdi-refresh",variant:"outlined",onClick:e.fetchUsers},null,8,["onClick"])]),_:1})]),_:1}),s(ee,{class:"elevation-1",headers:e.headers,items:e.filteredUsers,"items-per-page":10,loading:e.loading,"loading-text":"Carregando usuários...",search:e.search},{"item.avatar":o(({item:l})=>[s(v,{color:l.avatarColor,size:"45"},{default:o(()=>[t("span",ge,d(l.initials),1)]),_:2},1032,["color"])]),"item.name":o(({item:l})=>[t("div",null,[t("div",he,d(l.name),1),t("div",ve,d(l.email),1)])]),"item.role":o(({item:l})=>[s(F,{class:"font-weight-bold",color:e.getRoleColor(l.role),size:"small",variant:"flat"},{default:o(()=>[s(n,{class:"mr-1",icon:e.getRoleIcon(l.role),size:"small"},null,8,["icon"]),r(" "+d(l.role),1)]),_:2},1032,["color"])]),"item.status":o(({item:l})=>[s(F,{color:l.status==="active"?"success":"error",size:"small",variant:"flat"},{default:o(()=>[s(n,{class:"mr-1",icon:l.status==="active"?"mdi-check-circle":"mdi-close-circle",size:"small"},null,8,["icon"]),r(" "+d(l.status),1)]),_:2},1032,["color"])]),"item.actions":o(({item:l})=>[s(S,{location:"top",text:"Ver detalhes"},{activator:o(({props:C})=>[s(f,D(C,{class:"mr-1",color:"info",icon:"mdi-eye",size:"small",variant:"tonal",onClick:R=>e.viewUser(l)}),null,16,["onClick"])]),_:2},1024),s(S,{location:"top",text:"Editar usuário"},{activator:o(({props:C})=>[s(f,D(C,{class:"mr-1",color:"primary",icon:"mdi-pencil",size:"small",variant:"tonal",disabled:!e.canManageUsers,onClick:R=>e.editUser(l)}),null,16,["disabled","onClick"])]),_:2},1024),s(S,{location:"top",text:l.status==="active"?"Inativar usuário":"Ativar usuário"},{activator:o(({props:C})=>[s(f,D(C,{color:l.status==="active"?"warning":"success",icon:l.status==="active"?"mdi-account-off":"mdi-account-check",size:"small",variant:"tonal",disabled:!e.canManageUsers,onClick:R=>e.toggleUserStatus(l)}),null,16,["color","icon","disabled","onClick"])]),_:2},1032,["text"])]),_:1},8,["headers","items","loading","search"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(E,{modelValue:e.viewDialog,"onUpdate:modelValue":a[4]||(a[4]=l=>e.viewDialog=l),"max-width":"700"},{default:o(()=>[e.selectedUser?(y(),$(p,{key:0,elevation:"8"},{default:o(()=>[s(z,{class:"bg-primary pa-4"},{default:o(()=>[t("div",Ue,[t("div",be,[s(n,{class:"mr-2",icon:"mdi-account-circle",size:"30"}),a[46]||(a[46]=t("span",{class:"text-h5"},"Detalhes do Usuário",-1))]),s(f,{icon:"mdi-close",variant:"text",onClick:a[3]||(a[3]=l=>e.viewDialog=!1)})])]),_:1}),s(w,{class:"pa-6"},{default:o(()=>[t("div",Ve,[s(v,{class:"mb-3",color:e.selectedUser.avatarColor,size:"100"},{default:o(()=>[t("span",Ce,d(e.selectedUser.initials),1)]),_:1},8,["color"]),t("h2",ye,d(e.selectedUser.name),1),t("p",ke,d(e.selectedUser.email),1)]),s(b,{class:"mb-4"}),s(h,null,{default:o(()=>[s(i,{cols:"12",md:"6"},{default:o(()=>[s(I,{class:"px-0"},{prepend:o(()=>[s(n,{color:"primary",icon:"mdi-shield-account"})]),default:o(()=>[s(N,{class:"font-weight-bold"},{default:o(()=>[...a[47]||(a[47]=[r("Função",-1)])]),_:1}),s(q,null,{default:o(()=>[r(d(e.selectedUser.role),1)]),_:1})]),_:1})]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(I,{class:"px-0"},{prepend:o(()=>[s(n,{color:"primary",icon:"mdi-information"})]),default:o(()=>[s(N,{class:"font-weight-bold"},{default:o(()=>[...a[48]||(a[48]=[r("Status",-1)])]),_:1}),s(q,null,{default:o(()=>[s(F,{color:e.selectedUser.status==="active"?"success":"error",size:"small",variant:"flat"},{default:o(()=>[r(d(e.selectedUser.status),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(I,{class:"px-0"},{prepend:o(()=>[s(n,{color:"primary",icon:"mdi-clock-outline"})]),default:o(()=>[s(N,{class:"font-weight-bold"},{default:o(()=>[...a[49]||(a[49]=[r("Último acesso",-1)])]),_:1}),s(q,null,{default:o(()=>[r(d(e.selectedUser.lastAccess),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1},8,["modelValue"]),s(E,{modelValue:e.editDialog,"onUpdate:modelValue":a[15]||(a[15]=l=>e.editDialog=l),"max-width":"800",persistent:""},{default:o(()=>[e.editingUser?(y(),$(p,{key:0,elevation:"8"},{default:o(()=>[s(z,{class:"bg-primary pa-4"},{default:o(()=>[t("div",Pe,[s(n,{class:"mr-2",icon:"mdi-account-edit",size:"30"}),a[50]||(a[50]=t("span",{class:"text-h5"},"Editar Usuário",-1))])]),_:1}),s(w,{class:"pa-6"},{default:o(()=>[s(j,{ref:"editForm",modelValue:e.validForm,"onUpdate:modelValue":a[14]||(a[14]=l=>e.validForm=l)},{default:o(()=>[s(h,null,{default:o(()=>[s(i,{class:"text-center mb-4",cols:"12"},{default:o(()=>[s(v,{color:e.editingUser.avatarColor,size:"80"},{default:o(()=>[t("span",ze,d(e.editingUser.initials),1)]),_:1},8,["color"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.editingUser.name,"onUpdate:modelValue":a[5]||(a[5]=l=>e.editingUser.name=l),density:"comfortable",label:"Nome Completo","prepend-inner-icon":"mdi-account",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.editingUser.email,"onUpdate:modelValue":a[6]||(a[6]=l=>e.editingUser.email=l),density:"comfortable",label:"Email","prepend-inner-icon":"mdi-email",rules:[e.rules.required,e.rules.email],type:"email",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(g,{modelValue:e.editingUser.role,"onUpdate:modelValue":a[7]||(a[7]=l=>e.editingUser.role=l),density:"comfortable",items:["Admin","Gerente","Operador","Visualizador"],label:"Função","prepend-inner-icon":"mdi-shield-account",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(g,{modelValue:e.editingUser.status,"onUpdate:modelValue":a[8]||(a[8]=l=>e.editingUser.status=l),density:"comfortable",items:["Ativo","Inativo"],label:"Status","prepend-inner-icon":"mdi-information",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12"},{default:o(()=>[s(b,{class:"my-4"}),t("div",Te,[t("h3",De,[s(n,{class:"mr-2",icon:"mdi-lock"}),a[51]||(a[51]=r(" Alterar Senha ",-1))]),s(se,{modelValue:e.changePassword,"onUpdate:modelValue":a[9]||(a[9]=l=>e.changePassword=l),color:"primary","hide-details":"",label:"Alterar senha"},null,8,["modelValue"])])]),_:1}),e.changePassword?(y(),L(J,{key:0},[s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.newPassword,"onUpdate:modelValue":a[10]||(a[10]=l=>e.newPassword=l),"append-inner-icon":e.showPassword?"mdi-eye":"mdi-eye-off",density:"comfortable",label:"Nova Senha","prepend-inner-icon":"mdi-lock",rules:e.changePassword?[e.rules.required,e.rules.minLength]:[],type:e.showPassword?"text":"password",variant:"outlined","onClick:appendInner":a[11]||(a[11]=l=>e.showPassword=!e.showPassword)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.confirmPassword,"onUpdate:modelValue":a[12]||(a[12]=l=>e.confirmPassword=l),"append-inner-icon":e.showConfirmPassword?"mdi-eye":"mdi-eye-off",density:"comfortable",label:"Confirmar Nova Senha","prepend-inner-icon":"mdi-lock-check",rules:e.changePassword?[e.rules.required,e.rules.passwordMatch]:[],type:e.showConfirmPassword?"text":"password",variant:"outlined","onClick:appendInner":a[13]||(a[13]=l=>e.showConfirmPassword=!e.showConfirmPassword)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1})],64)):T("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(A,{class:"pa-4"},{default:o(()=>[s(M),s(f,{color:"grey",variant:"text",onClick:e.cancelEdit},{default:o(()=>[s(n,{class:"mr-1",icon:"mdi-close"}),a[52]||(a[52]=r(" Cancelar ",-1))]),_:1},8,["onClick"]),s(f,{color:"primary",disabled:!e.validForm,loading:e.saving,variant:"elevated",onClick:e.saveUser},{default:o(()=>[s(n,{class:"mr-1",icon:"mdi-content-save"}),a[53]||(a[53]=r(" Salvar Alterações ",-1))]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1})):T("",!0)]),_:1},8,["modelValue"]),s(E,{modelValue:e.createDialog,"onUpdate:modelValue":a[34]||(a[34]=l=>e.createDialog=l),"max-width":"800",persistent:""},{default:o(()=>[s(p,{elevation:"8"},{default:o(()=>[s(z,{class:"bg-primary pa-4"},{default:o(()=>[t("div",Se,[s(n,{class:"mr-2",icon:"mdi-account-plus",size:"30"}),a[54]||(a[54]=t("span",{class:"text-h5"},"Criar Novo Usuário",-1))])]),_:1}),s(w,{class:"pa-6"},{default:o(()=>[s(j,{ref:"createForm",modelValue:e.validCreateForm,"onUpdate:modelValue":a[33]||(a[33]=l=>e.validCreateForm=l)},{default:o(()=>[s(h,null,{default:o(()=>[s(i,{cols:"12"},{default:o(()=>[t("h3",Ee,[s(n,{class:"mr-2"},{default:o(()=>[...a[55]||(a[55]=[r("mdi-account-circle",-1)])]),_:1}),a[56]||(a[56]=r(" Informações Pessoais ",-1))])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.newUser.name,"onUpdate:modelValue":a[16]||(a[16]=l=>e.newUser.name=l),density:"comfortable","hide-details":"auto",label:"Nome Completo","prepend-inner-icon":"mdi-account",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.newUser.email,"onUpdate:modelValue":a[17]||(a[17]=l=>e.newUser.email=l),density:"comfortable","hide-details":"auto",label:"Email","prepend-inner-icon":"mdi-email",rules:[e.rules.required,e.rules.email],type:"email",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12"},{default:o(()=>[s(b,{class:"my-4"}),t("h3",$e,[s(n,{class:"mr-2"},{default:o(()=>[...a[57]||(a[57]=[r("mdi-phone",-1)])]),_:1}),a[58]||(a[58]=r(" Informações de Contato ",-1))])]),_:1}),s(i,{cols:"12",md:"4"},{default:o(()=>[s(g,{modelValue:e.newUser.tipo_contato,"onUpdate:modelValue":a[18]||(a[18]=l=>e.newUser.tipo_contato=l),density:"comfortable","hide-details":"auto",items:[{title:"Telefone",value:"telefone"},{title:"WhatsApp",value:"whatsapp"},{title:"Email",value:"email"},{title:"Instagram",value:"instagram"},{title:"Telegram",value:"telegram"},{title:"Outro",value:"outro"}],label:"Tipo de Contato","prepend-inner-icon":"mdi-phone",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12",md:"4"},{default:o(()=>[s(u,{modelValue:e.newUser.valor_contato,"onUpdate:modelValue":a[19]||(a[19]=l=>e.newUser.valor_contato=l),density:"comfortable","hide-details":"auto",label:"Valor do Contato","prepend-inner-icon":"mdi-account-voice",mask:e.getContactMask(e.newUser.tipo_contato),rules:[e.rules.required],variant:"outlined",onInput:e.formatContactValue,onKeypress:e.onContactKeypress},null,8,["modelValue","mask","rules","onInput","onKeypress"])]),_:1}),s(i,{cols:"12",md:"4"},{default:o(()=>[s(u,{modelValue:e.newUser.codigo_pais,"onUpdate:modelValue":a[20]||(a[20]=l=>e.newUser.codigo_pais=l),density:"comfortable","hide-details":"auto",label:"Código do País","prepend-inner-icon":"mdi-flag",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12"},{default:o(()=>[s(b,{class:"my-4"}),t("h3",Ae,[s(n,{class:"mr-2"},{default:o(()=>[...a[59]||(a[59]=[r("mdi-map-marker",-1)])]),_:1}),a[60]||(a[60]=r(" Informações de Endereço ",-1))])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(g,{modelValue:e.newUser.id_uf,"onUpdate:modelValue":[a[21]||(a[21]=l=>e.newUser.id_uf=l),e.onUfChange],density:"comfortable","hide-details":"auto","item-title":"label","item-value":"value",items:e.ufOptions,label:"UF","prepend-inner-icon":"mdi-map",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","items","rules","onUpdate:modelValue"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(g,{modelValue:e.newUser.id_municipio,"onUpdate:modelValue":a[22]||(a[22]=l=>e.newUser.id_municipio=l),density:"comfortable","hide-details":"auto","item-title":"label","item-value":"value",items:e.municipioOptions,label:"Município","prepend-inner-icon":"mdi-city",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","items","rules"])]),_:1}),s(i,{cols:"12",md:"8"},{default:o(()=>[s(u,{modelValue:e.newUser.logradouro,"onUpdate:modelValue":a[23]||(a[23]=l=>e.newUser.logradouro=l),density:"comfortable","hide-details":"auto",label:"Logradouro","prepend-inner-icon":"mdi-road",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12",md:"4"},{default:o(()=>[s(u,{modelValue:e.newUser.numero,"onUpdate:modelValue":a[24]||(a[24]=l=>e.newUser.numero=l),density:"comfortable","hide-details":"auto",label:"Número","prepend-inner-icon":"mdi-numeric",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.newUser.complemento,"onUpdate:modelValue":a[25]||(a[25]=l=>e.newUser.complemento=l),density:"comfortable","hide-details":"auto",label:"Complemento","prepend-inner-icon":"mdi-home",variant:"outlined"},null,8,["modelValue"])]),_:1}),s(i,{cols:"12",md:"3"},{default:o(()=>[s(u,{modelValue:e.newUser.cep,"onUpdate:modelValue":a[26]||(a[26]=l=>e.newUser.cep=l),density:"comfortable","hide-details":"auto",label:"CEP","prepend-inner-icon":"mdi-mailbox",mask:"#####-###",rules:[e.rules.required],variant:"outlined",onInput:e.formatCEP,onKeypress:e.onCEPKeypress},null,8,["modelValue","rules","onInput","onKeypress"])]),_:1}),s(i,{cols:"12",md:"3"},{default:o(()=>[s(u,{modelValue:e.newUser.bairro,"onUpdate:modelValue":a[27]||(a[27]=l=>e.newUser.bairro=l),density:"comfortable","hide-details":"auto",label:"Bairro","prepend-inner-icon":"mdi-home-group",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12"},{default:o(()=>[s(b,{class:"my-4"}),t("h3",Ie,[s(n,{class:"mr-2"},{default:o(()=>[...a[61]||(a[61]=[r("mdi-briefcase",-1)])]),_:1}),a[62]||(a[62]=r(" Informações Profissionais ",-1))])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(g,{modelValue:e.newUser.role,"onUpdate:modelValue":a[28]||(a[28]=l=>e.newUser.role=l),density:"comfortable","hide-details":"auto",items:["Admin","Gerente","Operador","Visualizador"],label:"Função","prepend-inner-icon":"mdi-shield-account",rules:[e.rules.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),s(i,{cols:"12"},{default:o(()=>[s(b,{class:"my-4"}),t("h3",Ne,[s(n,{class:"mr-2"},{default:o(()=>[...a[63]||(a[63]=[r("mdi-shield-lock",-1)])]),_:1}),a[64]||(a[64]=r(" Segurança ",-1))]),s(ae,{class:"mb-4",color:"info",icon:"mdi-information",variant:"tonal"},{default:o(()=>[...a[65]||(a[65]=[r(" A senha deve ter no mínimo 6 caracteres ",-1)])]),_:1})]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.newUser.password,"onUpdate:modelValue":a[29]||(a[29]=l=>e.newUser.password=l),"append-inner-icon":e.showNewPassword?"mdi-eye":"mdi-eye-off",density:"comfortable","hide-details":"auto",label:"Senha","prepend-inner-icon":"mdi-lock",rules:[e.rules.required,e.rules.minLength],type:e.showNewPassword?"text":"password",variant:"outlined","onClick:appendInner":a[30]||(a[30]=l=>e.showNewPassword=!e.showNewPassword)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1}),s(i,{cols:"12",md:"6"},{default:o(()=>[s(u,{modelValue:e.newUser.confirmPassword,"onUpdate:modelValue":a[31]||(a[31]=l=>e.newUser.confirmPassword=l),"append-inner-icon":e.showNewConfirmPassword?"mdi-eye":"mdi-eye-off",density:"comfortable","hide-details":"auto",label:"Confirmar Senha","prepend-inner-icon":"mdi-lock-check",rules:[e.rules.required,e.rules.newPasswordMatch],type:e.showNewConfirmPassword?"text":"password",variant:"outlined","onClick:appendInner":a[32]||(a[32]=l=>e.showNewConfirmPassword=!e.showNewConfirmPassword)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(A,{class:"pa-4"},{default:o(()=>[s(M),s(f,{color:"grey",variant:"text",onClick:e.cancelCreate},{default:o(()=>[s(n,{class:"mr-1",icon:"mdi-close"}),a[66]||(a[66]=r(" Cancelar ",-1))]),_:1},8,["onClick"]),s(f,{color:"primary",disabled:!e.validCreateForm,loading:e.saving,variant:"elevated",onClick:e.createUser},{default:o(()=>[s(n,{class:"mr-1",icon:"mdi-account-plus"}),a[67]||(a[67]=r(" Criar Usuário ",-1))]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(E,{modelValue:e.deleteDialog,"onUpdate:modelValue":a[36]||(a[36]=l=>e.deleteDialog=l),"max-width":"500"},{default:o(()=>[s(p,{elevation:"8"},{default:o(()=>[s(z,{class:B([e.selectedUser?.status==="active"?"bg-warning":"bg-success","pa-4"])},{default:o(()=>[s(n,{class:"mr-2",icon:e.selectedUser?.status==="active"?"mdi-account-off":"mdi-account-check",size:"30"},null,8,["icon"]),t("span",qe,d(e.selectedUser?.status==="active"?"Confirmar Inativação":"Confirmar Ativação"),1)]),_:1},8,["class"]),s(w,{class:"pa-6"},{default:o(()=>[t("div",Fe,[s(n,{color:e.selectedUser?.status==="active"?"warning":"success",icon:e.selectedUser?.status==="active"?"mdi-account-off":"mdi-account-check",size:"80"},null,8,["color","icon"])]),t("p",Me,[r(" Tem certeza que deseja "+d(e.selectedUser?.status==="active"?"inativar":"ativar")+" o usuário ",1),t("strong",{class:B(e.selectedUser?.status==="active"?"text-warning":"text-success")},d(e.selectedUser?.name),3),a[68]||(a[68]=r("? ",-1))]),t("p",Re,d(e.selectedUser?.status==="active"?"O usuário não poderá mais acessar o sistema.":"O usuário poderá acessar o sistema novamente."),1)]),_:1}),s(A,{class:"pa-4"},{default:o(()=>[s(M),s(f,{color:"grey",variant:"text",onClick:a[35]||(a[35]=l=>e.deleteDialog=!1)},{default:o(()=>[s(n,{class:"mr-1",icon:"mdi-close"}),a[69]||(a[69]=r(" Cancelar ",-1))]),_:1}),s(f,{color:e.selectedUser?.status==="active"?"warning":"success",variant:"elevated",onClick:e.confirmToggleStatus},{default:o(()=>[s(n,{class:"mr-1",icon:e.selectedUser?.status==="active"?"mdi-account-off":"mdi-account-check"},null,8,["icon"]),r(" "+d(e.selectedUser?.status==="active"?"Inativar":"Ativar"),1)]),_:1},8,["color","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(oe,{modelValue:e.snackbar,"onUpdate:modelValue":a[37]||(a[37]=l=>e.snackbar=l),color:e.snackbarColor,elevation:"8",location:"top right",timeout:4e3},{default:o(()=>[t("div",Le,[s(n,{class:"mr-2",icon:e.snackbarColor==="success"?"mdi-check-circle":e.snackbarColor==="error"?"mdi-alert-circle":"mdi-information"},null,8,["icon"]),r(" "+d(e.snackbarText),1)])]),_:1},8,["modelValue","color"])])}const ds=H(le,[["render",Be],["__scopeId","data-v-5740ebf7"]]);export{ds as default};
