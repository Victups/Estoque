import{U as n}from"./index-2CK1TBd1.js";const s=(a,e=0)=>{if(a==null)return e;const i=typeof a=="number"?a:Number(a);return Number.isNaN(i)?e:i},d=a=>({id:a.id,nome:a.nome,codigo:a.codigo,descricao:a.descricao??void 0,id_unidade_medida:a.unidadeMedida?.id??0,id_marca:a.marca?.id??null,id_categoria:a.categoria?.id??null,responsavel_cadastro:a.responsavelCadastro?.id??0,data_cadastro:a.dataCadastro??a.createdAt??void 0,usuario_log_id:a.usuarioLogId??null,estoque_minimo:s(a.estoqueMinimo,0),is_perecivel:!!a.isPerecivel,ativo:a.ativo??!0}),r=a=>({...d(a),categoria_nome:a.categoria?.nome,marca_nome:a.marca?.nome,unidade_abreviacao:a.unidadeMedida?.abreviacao,unidade_descricao:a.unidadeMedida?.descricao,responsavel_nome:a.responsavelCadastro?.nome}),l=a=>({...d(a),categoria_nome:a.categoria?.nome,marca_nome:a.marca?.nome,unidade_abreviacao:a.unidadeMedida?.abreviacao,unidade_descricao:a.unidadeMedida?.descricao,responsavel_nome:a.responsavelCadastro?.nome,usuario_log_nome:a.usuarioLog?.nome,criado_por_nome:a.createdBy?.nome,atualizado_por_nome:a.updatedBy?.nome,created_at:a.createdAt??void 0,updated_at:a.updatedAt??void 0,fornecedores:a.fornecedores?.map(e=>({id_fornecedor:e.fornecedor?.id??e.id_fornecedor,nome:e.fornecedor?.nome??`Fornecedor ${e.id_fornecedor}`,cnpj:e.fornecedor?.cnpj??null}))??[],lotes:a.lotes?.map(e=>({id:e.id,codigo_lote:e.codigo_lote,quantidade:s(e.quantidade,0),data_validade:e.data_validade??null,id_localizacao:e.localizacao?.id??null}))??[]}),o=a=>{const e=Object.entries(a).filter(([,i])=>i!=null);return Object.fromEntries(e)};class _{endpoint="/produtos";supplierEndpoint="/produto-fornecedor";async fetchAll(){const{data:e}=await n.get(this.endpoint);return e}async getAll(){return(await this.fetchAll()).map(d)}async getAllEnriched(){return(await this.fetchAll()).map(r)}async getById(e){const{data:i}=await n.get(`${this.endpoint}/${e}`);return d(i)}async getDetail(e){const{data:i}=await n.get(`${this.endpoint}/${e}`);return l(i)}async create(e){const i=o({nome:e.nome,descricao:e.descricao,codigo:e.codigo?.trim()||void 0,id_unidade_medida:e.id_unidade_medida,id_marca:e.id_marca??void 0,id_categoria:e.id_categoria??void 0,responsavel_cadastro:e.responsavel_cadastro,usuario_log_id:e.usuario_log_id??void 0,estoque_minimo:e.estoque_minimo,ativo:e.ativo,is_perecivel:e.is_perecivel}),{data:t}=await n.post(this.endpoint,i);return d(t)}async update(e,i){const t=o({nome:i.nome,descricao:i.descricao,codigo:i.codigo?.trim(),id_unidade_medida:i.id_unidade_medida,id_marca:i.id_marca,id_categoria:i.id_categoria,responsavel_cadastro:i.responsavel_cadastro,usuario_log_id:i.usuario_log_id,estoque_minimo:i.estoque_minimo,ativo:i.ativo,is_perecivel:i.is_perecivel}),{data:c}=await n.patch(`${this.endpoint}/${e}`,t);return d(c)}async delete(e){await n.delete(`${this.endpoint}/${e}`)}async linkToSupplier(e,i,t){await n.post(this.supplierEndpoint,{id_produto:e,id_fornecedor:i,usuario_log_id:t??null})}}class m{endpoint="/categorias";async getAll(){const{data:e}=await n.get(this.endpoint);return e}async getById(e){const{data:i}=await n.get(`${this.endpoint}/${e}`);return i}async create(e){const{data:i}=await n.post(this.endpoint,e);return i}async update(e,i){const{data:t}=await n.patch(`${this.endpoint}/${e}`,o(i));return t}async delete(e){await n.delete(`${this.endpoint}/${e}`)}}class g{endpoint="/marcas";async getAll(){const{data:e}=await n.get(this.endpoint);return e}async getById(e){const{data:i}=await n.get(`${this.endpoint}/${e}`);return i}async create(e){const{data:i}=await n.post(this.endpoint,e);return i}async update(e,i){const{data:t}=await n.patch(`${this.endpoint}/${e}`,o(i));return t}async delete(e){await n.delete(`${this.endpoint}/${e}`)}}class u{endpoint="/unidades";async getAll(){const{data:e}=await n.get(this.endpoint);return e}async getById(e){const{data:i}=await n.get(`${this.endpoint}/${e}`);return i}async create(e){const{data:i}=await n.post(this.endpoint,e);return i}async update(e,i){const{data:t}=await n.patch(`${this.endpoint}/${e}`,o(i));return t}async delete(e){await n.delete(`${this.endpoint}/${e}`)}}const p=new _,y=new m,h=new g,w=new u;export{h as B,y as C,p as P,w as U};
