import{h as aa,p as la,z as ke,x as m,a0 as ta,a1 as Ae,T as oa,m as sa,E as ia,a,n as Q,b as i,R as Ue,s as ue,F as Te,v as na,k as M,u as Se,y as ra,e as ze,o as te,w as l,c as fe,g as ie,d,t as g,_ as ua}from"./index-Cgq_6uxJ.js";import{w as da,t as ca,x as ma,d as c,L as va,V as N,a as n,b as $,c as q,e as L,f as oe,k as fa,n as W,h as pe,i as ge,j as ye,o as Ve}from"./VList-EL7smbZR.js";import{u as pa,d as Pe,b as ga,h as ya,i as Va,a as k,V as b}from"./VTextField-DW8nCNV5.js";import{V as ne}from"./VTooltip-ypdhmU4O.js";import{e as Ee,f as ba,V as D}from"./VSelect-DdUCyK7X.js";import{V as wa}from"./VDataTable-BwrgDJdF.js";import{V as be}from"./VChip-BwqJumVp.js";import{V as re}from"./VDialog-D0noMbjk.js";import{V as Ie}from"./VForm-DePCEDBA.js";import{V as we}from"./VSpacer-BOurC99C.js";import{V as ha}from"./VAlert-GDjScSAF.js";import{V as _a}from"./VSnackbar-DySBK_uh.js";import"./tag-BQQzLX6E.js";import"./VMenu-C4chORbR.js";import"./filter-CQcYvJU3.js";const xa=la({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Va(),...ba()},"VSwitch"),Ca=aa()({name:"VSwitch",inheritAttrs:!1,props:xa(),emits:{"update:focused":p=>!0,"update:modelValue":p=>!0,"update:indeterminate":p=>!0},setup(p,X){let{attrs:j,slots:w}=X;const E=ke(p,"indeterminate"),A=ke(p,"modelValue"),{loaderClasses:F}=da(p),{isFocused:u,focus:v,blur:x}=pa(p),C=m(),h=m(),B=ta&&window.matchMedia("(forced-colors: active)").matches,I=Ae(()=>typeof p.loading=="string"&&p.loading!==""?p.loading:p.color),_=oa(),Y=Ae(()=>p.id||`switch-${_}`);function U(){E.value&&(E.value=!1)}function S(z){z.stopPropagation(),z.preventDefault(),C.value?.input?.click()}return sa(()=>{const[z,O]=ia(j),G=Pe.filterProps(p),R=Ee.filterProps(p);return a(Pe,Q({ref:h,class:["v-switch",{"v-switch--flat":p.flat},{"v-switch--inset":p.inset},{"v-switch--indeterminate":E.value},F.value,p.class]},z,G,{modelValue:A.value,"onUpdate:modelValue":s=>A.value=s,id:Y.value,focused:u.value,style:p.style}),{...w,default:s=>{let{id:K,messagesId:J,isDisabled:Z,isReadonly:se,isValid:H}=s;const ee={model:A,isValid:H};return a(Ee,Q({ref:C},R,{modelValue:A.value,"onUpdate:modelValue":[r=>A.value=r,U],id:K.value,"aria-describedby":J.value,type:"checkbox","aria-checked":E.value?"mixed":void 0,disabled:Z.value,readonly:se.value,onFocus:v,onBlur:x},O),{...w,default:r=>{let{backgroundColorClasses:ae,backgroundColorStyles:P}=r;return i("div",{class:ue(["v-switch__track",B?void 0:ae.value]),style:Ue(P.value),onClick:S},[w["track-true"]&&i("div",{key:"prepend",class:"v-switch__track-true"},[w["track-true"](ee)]),w["track-false"]&&i("div",{key:"append",class:"v-switch__track-false"},[w["track-false"](ee)])])},input:r=>{let{inputNode:ae,icon:P,backgroundColorClasses:de,backgroundColorStyles:ce}=r;return i(Te,null,[ae,i("div",{class:ue(["v-switch__thumb",{"v-switch__thumb--filled":P||p.loading},p.inset||B?void 0:de.value]),style:Ue(p.inset?void 0:ce.value)},[w.thumb?a(ca,{defaults:{VIcon:{icon:P,size:"x-small"}}},{default:()=>[w.thumb({...ee,icon:P})]}):a(ma,null,{default:()=>[p.loading?a(va,{name:"v-switch",active:!0,color:H.value===!1?void 0:I.value},{default:le=>w.loader?w.loader(le):a(ga,{active:le.isActive,color:le.color,indeterminate:!0,size:"16",width:"2"},null)}):P&&a(c,{key:String(P),icon:P,size:"x-small"},null)]})])])}})}})}),ya({},h)}}),ka={class:"user-management-page"},Aa={class:"d-flex justify-space-between align-center mb-4"},Ua={class:"text-h3 font-weight-bold mb-2"},Sa={class:"d-flex align-center"},za={class:"text-h4 font-weight-bold"},Pa={class:"d-flex align-center"},Ea={class:"text-h4 font-weight-bold"},Ia={class:"d-flex align-center"},Ta={class:"text-h4 font-weight-bold"},$a={class:"d-flex align-center"},qa={class:"text-h4 font-weight-bold"},Da={class:"text-h6 text-white font-weight-bold"},Fa={class:"font-weight-bold"},Ra={class:"text-caption text-grey"},Ma={class:"d-flex justify-space-between align-center"},Na={class:"d-flex align-center"},La={class:"text-center mb-6"},ja={class:"text-h3 text-white font-weight-bold"},Ba={class:"text-h4 mb-1"},Oa={class:"text-h6 text-grey"},Ga={class:"d-flex align-center"},Ka={class:"text-h4 text-white"},Ja={class:"d-flex align-center justify-space-between mb-2"},Ha={class:"text-h6"},Wa={class:"d-flex align-center"},Qa={class:"text-h6 font-weight-bold mb-3"},Xa={class:"text-h6 font-weight-bold mb-3"},Ya={class:"text-h6 font-weight-bold mb-3"},Za={class:"text-h6 font-weight-bold mb-3"},el={class:"text-h6 font-weight-bold mb-3"},al={class:"text-h5"},ll={class:"text-center mb-4"},tl={class:"text-h6 text-center"},ol={class:"text-center text-grey mt-2"},sl={class:"d-flex align-center"},il=na({__name:"UserManagementPage",setup(p){const X=m(""),j=m("Todos"),w=m("Todos"),E=m(!1),A=m(!1),F=m(!1),u=m(null),v=m(null),x=m(!1),C=m(""),h=m("success"),B=m(!1),I=m(!1),_=m([]),Y=m(!1),U=m(!1),S=m(""),z=m(""),O=m(!1),G=m(!1),R=m(!1),s=m({name:"",email:"",password:"",confirmPassword:"",role:"",tipo_contato:"",valor_contato:"",codigo_pais:"+55",id_uf:null,id_municipio:null,logradouro:"",numero:"",complemento:"",cep:"",bairro:""}),K=m(!1),J=m(!1),Z=m(!1),se=m([]),H=m([]),ee=[{title:"",key:"avatar",sortable:!1,width:"70px"},{title:"Nome",key:"name"},{title:"Função",key:"role"},{title:"Status",key:"status"},{title:"Ações",key:"actions",sortable:!1,width:"180px"}],r={required:o=>!!o||"Campo obrigatório",email:o=>/.+@.+\..+/.test(o)||"Email inválido",minLength:o=>o&&o.length>=6||"Mínimo de 6 caracteres",passwordMatch:o=>o===S.value||"As senhas não coincidem",newPasswordMatch:o=>o===s.value.password||"As senhas não coincidem"},ae=M(()=>_.value.filter(o=>o.status==="active").length),P=M(()=>_.value.filter(o=>o.role==="Admin").length),de=M(()=>_.value.filter(o=>{const e=j.value==="Todos"||o.role===j.value,t=w.value==="Todos"||o.status===w.value;return e&&t})),ce=M(()=>se.value.map(o=>({label:`${o.sigla} - ${o.nome}`,value:o.id}))),le=M(()=>H.value.map(o=>({label:o.nome,value:o.id}))),he=M(()=>Se().role==="admin"),_e=M(()=>Se().role==="admin");function me(o){const e=o.split(" ");return e.length>=2&&e[0]?.[0]&&e[1]?.[0]?`${e[0][0]}${e[1][0]}`.toUpperCase():o.slice(0,2).toUpperCase()}function $e(o,e){const t=o.toLowerCase(),f=e.toLowerCase();return t.includes("admin")||f.includes("admin")?"Admin":t.includes("gerente")?"Gerente":t.includes("almoxarife")?"Operador":"Visualizador"}function xe(o){const e=["primary","success","warning","error","info","secondary"];return e[o%e.length]??"primary"}function qe(o){return{Admin:"error",Gerente:"warning",Operador:"info",Visualizador:"grey"}[o]}function De(o){return{Admin:"mdi-shield-crown",Gerente:"mdi-account-tie",Operador:"mdi-account-wrench",Visualizador:"mdi-account-eye"}[o]}async function Fe(){try{const o=await fetch("http://localhost:3001/uf");if(!o.ok)throw new Error("Erro ao carregar UFs");const e=await o.json();se.value=Array.isArray(e)&&Array.isArray(e[0])?e[0]:Array.isArray(e)?e:[]}catch(o){console.error("Erro ao carregar UFs:",o)}}async function Re(o){try{const e=await fetch(`http://localhost:3001/municipio?id_uf=${o}`);if(!e.ok)throw new Error("Erro ao carregar municípios");const t=await e.json();H.value=Array.isArray(t)&&Array.isArray(t[0])?t[0]:Array.isArray(t)?t:[]}catch(e){console.error("Erro ao carregar municípios:",e)}}function Me(o){s.value.id_municipio=null,o?Re(o):H.value=[]}function Ne(o){switch(o){case"telefone":case"whatsapp":return"(##) #####-####";case"email":return"";case"instagram":case"telegram":return"";default:return""}}function Le(o){const t=o.target.value,f=s.value.tipo_contato;if(f==="telefone"||f==="whatsapp"){const y=t.replace(/\D/g,"").slice(0,11);y.length<=2?s.value.valor_contato=y:y.length<=6?s.value.valor_contato=`(${y.slice(0,2)}) ${y.slice(2)}`:y.length<=10?s.value.valor_contato=`(${y.slice(0,2)}) ${y.slice(2,6)}-${y.slice(6)}`:s.value.valor_contato=`(${y.slice(0,2)}) ${y.slice(2,7)}-${y.slice(7)}`}else s.value.valor_contato=t.slice(0,100)}function je(o){const V=o.target.value.replace(/\D/g,"").slice(0,8);s.value.cep=V.length<=5?V:`${V.slice(0,5)}-${V.slice(5)}`}function Be(o){const e=s.value.tipo_contato;if(e==="telefone"||e==="whatsapp"){const t=String.fromCodePoint(o.which);/[0-9]/.test(t)||o.preventDefault()}}function Oe(o){const e=String.fromCodePoint(o.which);/[0-9]/.test(e)||o.preventDefault()}async function Ce(){B.value=!0;try{const o=await fetch("http://localhost:3001/usuarios");if(!o.ok)throw new Error("Erro ao buscar usuários");const e=await o.json(),t=Array.isArray(e)&&Array.isArray(e[0])?e[0]:Array.isArray(e)?e:[];_.value=t.map((f,V)=>({id:f.id,nome:f.nome,name:f.nome,email:f.email,role:$e(f.nome,f.email),status:"active",lastAccess:new Date().toLocaleString("pt-BR"),initials:me(f.nome),avatarColor:xe(V)})),C.value="Usuários carregados com sucesso!",h.value="success",x.value=!0}catch(o){console.error("Erro ao buscar usuários:",o),C.value="Erro ao carregar usuários. Verifique se o backend está rodando.",h.value="error",x.value=!0}finally{B.value=!1}}function Ge(o){u.value=o,E.value=!0}function Ke(o){v.value={...o},U.value=!1,S.value="",z.value="",A.value=!0}function Je(){A.value=!1,v.value=null,U.value=!1,S.value="",z.value=""}async function He(){if(v.value){I.value=!0;try{const e=await(await fetch("http://localhost:3001/usuarios")).json(),t=Array.isArray(e)&&Array.isArray(e[0])?e[0]:Array.isArray(e)?e:[],f=t.findIndex(T=>T.id===v.value.id);if(f!==-1){const T=t[f];T&&(t[f]={...T,nome:v.value.name||v.value.nome||"",email:v.value.email},U.value&&S.value&&(t[f].senha=S.value))}if(!(await fetch("http://localhost:3001/usuarios",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify([t])})).ok)throw new Error("Erro ao atualizar usuário");const y=_.value.findIndex(T=>T.id===v.value.id);y!==-1&&v.value&&(_.value[y]={...v.value,initials:me(v.value.name||v.value.nome||"")}),C.value="Usuário atualizado com sucesso!",h.value="success",x.value=!0,A.value=!1,v.value=null,U.value=!1,S.value="",z.value=""}catch(o){console.error("Erro ao atualizar usuário:",o),C.value="Erro ao atualizar usuário",h.value="error",x.value=!0}finally{I.value=!1}}}function We(o){u.value=o,F.value=!0}async function Qe(){if(u.value)try{const e=await(await fetch("http://localhost:3001/usuarios")).json();if((Array.isArray(e)&&Array.isArray(e[0])?e[0]:Array.isArray(e)?e:[]).findIndex(V=>V.id===u.value.id)!==-1){const V=u.value.status==="active"?"inactive":"active",y=_.value.findIndex(T=>T.id===u.value.id);y!==-1&&_.value[y]&&(_.value[y].status=V),C.value=`Usuário ${u.value.name} ${V==="active"?"ativado":"inativado"} com sucesso!`,h.value="success",x.value=!0}}catch(o){console.error("Erro ao alterar status do usuário:",o),C.value="Erro ao alterar status do usuário",h.value="error",x.value=!0}finally{F.value=!1,u.value=null}}function Xe(){s.value={name:"",email:"",password:"",confirmPassword:"",role:"",tipo_contato:"",valor_contato:"",codigo_pais:"+55",id_uf:null,id_municipio:null,logradouro:"",numero:"",complemento:"",cep:"",bairro:""},R.value=!0}function Ye(){R.value=!1,s.value={name:"",email:"",password:"",confirmPassword:"",role:"",tipo_contato:"",valor_contato:"",codigo_pais:"+55",id_uf:null,id_municipio:null,logradouro:"",numero:"",complemento:"",cep:"",bairro:""}}async function Ze(){I.value=!0;try{const e=await(await fetch("http://localhost:3001/usuarios")).json(),t=Array.isArray(e)&&Array.isArray(e[0])?e[0]:Array.isArray(e)?e:[];if(t.some(ve=>ve.email===s.value.email)){C.value="Este e-mail já está cadastrado",h.value="error",x.value=!0,I.value=!1;return}const V=t.length>0?Math.max(...t.map(ve=>ve.id))+1:1,y={id:V,nome:s.value.name,email:s.value.email,senha:s.value.password,id_contato:V,role:"estoquista"};if(t.push(y),!(await fetch("http://localhost:3001/usuarios",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify([t])})).ok)throw new Error("Erro ao criar usuário");const ea={id:V,nome:s.value.name,name:s.value.name,email:s.value.email,role:s.value.role,status:"active",lastAccess:new Date().toLocaleString("pt-BR"),initials:me(s.value.name),avatarColor:xe(_.value.length)};_.value.push(ea),C.value="Usuário criado com sucesso!",h.value="success",x.value=!0,R.value=!1,s.value={name:"",email:"",password:"",confirmPassword:"",role:"",tipo_contato:"",valor_contato:"",codigo_pais:"+55",id_uf:null,id_municipio:null,logradouro:"",numero:"",complemento:"",cep:"",bairro:""}}catch(o){console.error("Erro ao criar usuário:",o),C.value="Erro ao criar usuário",h.value="error",x.value=!0}finally{I.value=!1}}return ra(()=>{Ce(),Fe()}),(o,e)=>(te(),ze("div",ka,[a(fa,{class:"pa-6",fluid:""},{default:l(()=>[a(N,{class:"mb-6"},{default:l(()=>[a(n,{cols:"12"},{default:l(()=>[i("div",Aa,[i("div",null,[i("h1",Ua,[a(c,{class:"mr-3",icon:"mdi-account-group",size:"40"}),e[38]||(e[38]=d(" Gerenciamento de Usuários ",-1))]),e[39]||(e[39]=i("p",{class:"text-h6 text-grey-darken-1"}," Visualize e gerencie todos os usuários do sistema ",-1))]),a(k,{color:"primary",elevation:"2","prepend-icon":"mdi-plus",size:"large",disabled:!_e.value,onClick:Xe},{default:l(()=>[...e[40]||(e[40]=[d(" Novo Usuário ",-1)])]),_:1},8,["disabled"]),_e.value?ie("",!0):(te(),fe(ne,{key:0,location:"top",text:"Apenas administradores podem criar usuários"},{activator:l(({props:t})=>[a(c,Q(t,{class:"ml-2",color:"warning",icon:"mdi-lock"}),null,16)]),_:1}))])]),_:1})]),_:1}),a(N,{class:"mb-6"},{default:l(()=>[a(n,{cols:"12",md:"3",sm:"6"},{default:l(()=>[a($,{class:"stat-card",elevation:"3"},{default:l(()=>[a(q,null,{default:l(()=>[i("div",Sa,[a(L,{class:"mr-4",color:"primary",size:"56"},{default:l(()=>[a(c,{icon:"mdi-account-multiple",size:"30"})]),_:1}),i("div",null,[e[41]||(e[41]=i("p",{class:"text-caption text-grey mb-1"},"Total de Usuários",-1)),i("h2",za,g(_.value.length),1)])])]),_:1})]),_:1})]),_:1}),a(n,{cols:"12",md:"3",sm:"6"},{default:l(()=>[a($,{class:"stat-card",elevation:"3"},{default:l(()=>[a(q,null,{default:l(()=>[i("div",Pa,[a(L,{class:"mr-4",color:"success",size:"56"},{default:l(()=>[a(c,{icon:"mdi-account-check",size:"30"})]),_:1}),i("div",null,[e[42]||(e[42]=i("p",{class:"text-caption text-grey mb-1"},"Ativos",-1)),i("h2",Ea,g(ae.value),1)])])]),_:1})]),_:1})]),_:1}),a(n,{cols:"12",md:"3",sm:"6"},{default:l(()=>[a($,{class:"stat-card",elevation:"3"},{default:l(()=>[a(q,null,{default:l(()=>[i("div",Ia,[a(L,{class:"mr-4",color:"warning",size:"56"},{default:l(()=>[a(c,{icon:"mdi-shield-account",size:"30"})]),_:1}),i("div",null,[e[43]||(e[43]=i("p",{class:"text-caption text-grey mb-1"},"Administradores",-1)),i("h2",Ta,g(P.value),1)])])]),_:1})]),_:1})]),_:1}),a(n,{cols:"12",md:"3",sm:"6"},{default:l(()=>[a($,{class:"stat-card",elevation:"3"},{default:l(()=>[a(q,null,{default:l(()=>[i("div",$a,[a(L,{class:"mr-4",color:"info",size:"56"},{default:l(()=>[a(c,{icon:"mdi-account-clock",size:"30"})]),_:1}),i("div",null,[e[44]||(e[44]=i("p",{class:"text-caption text-grey mb-1"},"Novos (Este mês)",-1)),i("h2",qa,g(_.value.length),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),a(N,null,{default:l(()=>[a(n,{cols:"12"},{default:l(()=>[a($,{class:"main-card",elevation:"3"},{default:l(()=>[a(oe,{class:"bg-primary pa-4"},{default:l(()=>[a(c,{class:"mr-2",icon:"mdi-format-list-bulleted"}),e[45]||(e[45]=i("span",{class:"text-h5"},"Lista de Usuários",-1))]),_:1}),a(q,{class:"pa-6"},{default:l(()=>[a(N,{class:"mb-4"},{default:l(()=>[a(n,{cols:"12",md:"5"},{default:l(()=>[a(b,{modelValue:X.value,"onUpdate:modelValue":e[0]||(e[0]=t=>X.value=t),clearable:"",density:"comfortable","hide-details":"",label:"Buscar usuários",placeholder:"Digite nome ou email...","prepend-inner-icon":"mdi-magnify",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:l(()=>[a(D,{modelValue:j.value,"onUpdate:modelValue":e[1]||(e[1]=t=>j.value=t),density:"comfortable","hide-details":"",items:["Todos","Admin","Gerente","Operador","Visualizador"],label:"Filtrar por Função","prepend-inner-icon":"mdi-filter",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:l(()=>[a(D,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=t=>w.value=t),density:"comfortable","hide-details":"",items:["Todos","Ativo","Inativo"],label:"Filtrar por Status","prepend-inner-icon":"mdi-filter-variant",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{class:"d-flex align-center",cols:"12",md:"1"},{default:l(()=>[a(k,{color:"grey-darken-1",icon:"mdi-refresh",variant:"outlined",onClick:Ce})]),_:1})]),_:1}),a(wa,{class:"elevation-1",headers:ee,items:de.value,"items-per-page":10,loading:B.value,"loading-text":"Carregando usuários...",search:X.value},{"item.avatar":l(({item:t})=>[a(L,{color:t.avatarColor,size:"45"},{default:l(()=>[i("span",Da,g(t.initials),1)]),_:2},1032,["color"])]),"item.name":l(({item:t})=>[i("div",null,[i("div",Fa,g(t.name),1),i("div",Ra,g(t.email),1)])]),"item.role":l(({item:t})=>[a(be,{class:"font-weight-bold",color:qe(t.role),size:"small",variant:"flat"},{default:l(()=>[a(c,{class:"mr-1",icon:De(t.role),size:"small"},null,8,["icon"]),d(" "+g(t.role),1)]),_:2},1032,["color"])]),"item.status":l(({item:t})=>[a(be,{color:t.status==="active"?"success":"error",size:"small",variant:"flat"},{default:l(()=>[a(c,{class:"mr-1",icon:t.status==="active"?"mdi-check-circle":"mdi-close-circle",size:"small"},null,8,["icon"]),d(" "+g(t.status),1)]),_:2},1032,["color"])]),"item.actions":l(({item:t})=>[a(ne,{location:"top",text:"Ver detalhes"},{activator:l(({props:f})=>[a(k,Q(f,{class:"mr-1",color:"info",icon:"mdi-eye",size:"small",variant:"tonal",onClick:V=>Ge(t)}),null,16,["onClick"])]),_:2},1024),a(ne,{location:"top",text:"Editar usuário"},{activator:l(({props:f})=>[a(k,Q(f,{class:"mr-1",color:"primary",icon:"mdi-pencil",size:"small",variant:"tonal",disabled:!he.value,onClick:V=>Ke(t)}),null,16,["disabled","onClick"])]),_:2},1024),a(ne,{location:"top",text:t.status==="active"?"Inativar usuário":"Ativar usuário"},{activator:l(({props:f})=>[a(k,Q(f,{color:t.status==="active"?"warning":"success",icon:t.status==="active"?"mdi-account-off":"mdi-account-check",size:"small",variant:"tonal",disabled:!he.value,onClick:V=>We(t)}),null,16,["color","icon","disabled","onClick"])]),_:2},1032,["text"])]),_:1},8,["items","loading","search"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(re,{modelValue:E.value,"onUpdate:modelValue":e[4]||(e[4]=t=>E.value=t),"max-width":"700"},{default:l(()=>[u.value?(te(),fe($,{key:0,elevation:"8"},{default:l(()=>[a(oe,{class:"bg-primary pa-4"},{default:l(()=>[i("div",Ma,[i("div",Na,[a(c,{class:"mr-2",icon:"mdi-account-circle",size:"30"}),e[46]||(e[46]=i("span",{class:"text-h5"},"Detalhes do Usuário",-1))]),a(k,{icon:"mdi-close",variant:"text",onClick:e[3]||(e[3]=t=>E.value=!1)})])]),_:1}),a(q,{class:"pa-6"},{default:l(()=>[i("div",La,[a(L,{class:"mb-3",color:u.value.avatarColor,size:"100"},{default:l(()=>[i("span",ja,g(u.value.initials),1)]),_:1},8,["color"]),i("h2",Ba,g(u.value.name),1),i("p",Oa,g(u.value.email),1)]),a(W,{class:"mb-4"}),a(N,null,{default:l(()=>[a(n,{cols:"12",md:"6"},{default:l(()=>[a(pe,{class:"px-0"},{prepend:l(()=>[a(c,{color:"primary",icon:"mdi-shield-account"})]),default:l(()=>[a(ge,{class:"font-weight-bold"},{default:l(()=>[...e[47]||(e[47]=[d("Função",-1)])]),_:1}),a(ye,null,{default:l(()=>[d(g(u.value.role),1)]),_:1})]),_:1})]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(pe,{class:"px-0"},{prepend:l(()=>[a(c,{color:"primary",icon:"mdi-information"})]),default:l(()=>[a(ge,{class:"font-weight-bold"},{default:l(()=>[...e[48]||(e[48]=[d("Status",-1)])]),_:1}),a(ye,null,{default:l(()=>[a(be,{color:u.value.status==="active"?"success":"error",size:"small",variant:"flat"},{default:l(()=>[d(g(u.value.status),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(pe,{class:"px-0"},{prepend:l(()=>[a(c,{color:"primary",icon:"mdi-clock-outline"})]),default:l(()=>[a(ge,{class:"font-weight-bold"},{default:l(()=>[...e[49]||(e[49]=[d("Último acesso",-1)])]),_:1}),a(ye,null,{default:l(()=>[d(g(u.value.lastAccess),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ie("",!0)]),_:1},8,["modelValue"]),a(re,{modelValue:A.value,"onUpdate:modelValue":e[15]||(e[15]=t=>A.value=t),"max-width":"800",persistent:""},{default:l(()=>[v.value?(te(),fe($,{key:0,elevation:"8"},{default:l(()=>[a(oe,{class:"bg-primary pa-4"},{default:l(()=>[i("div",Ga,[a(c,{class:"mr-2",icon:"mdi-account-edit",size:"30"}),e[50]||(e[50]=i("span",{class:"text-h5"},"Editar Usuário",-1))])]),_:1}),a(q,{class:"pa-6"},{default:l(()=>[a(Ie,{ref:"editForm",modelValue:Y.value,"onUpdate:modelValue":e[14]||(e[14]=t=>Y.value=t)},{default:l(()=>[a(N,null,{default:l(()=>[a(n,{class:"text-center mb-4",cols:"12"},{default:l(()=>[a(L,{color:v.value.avatarColor,size:"80"},{default:l(()=>[i("span",Ka,g(v.value.initials),1)]),_:1},8,["color"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:v.value.name,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value.name=t),density:"comfortable",label:"Nome Completo","prepend-inner-icon":"mdi-account",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:v.value.email,"onUpdate:modelValue":e[6]||(e[6]=t=>v.value.email=t),density:"comfortable",label:"Email","prepend-inner-icon":"mdi-email",rules:[r.required,r.email],type:"email",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(D,{modelValue:v.value.role,"onUpdate:modelValue":e[7]||(e[7]=t=>v.value.role=t),density:"comfortable",items:["Admin","Gerente","Operador","Visualizador"],label:"Função","prepend-inner-icon":"mdi-shield-account",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(D,{modelValue:v.value.status,"onUpdate:modelValue":e[8]||(e[8]=t=>v.value.status=t),density:"comfortable",items:["Ativo","Inativo"],label:"Status","prepend-inner-icon":"mdi-information",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12"},{default:l(()=>[a(W,{class:"my-4"}),i("div",Ja,[i("h3",Ha,[a(c,{class:"mr-2",icon:"mdi-lock"}),e[51]||(e[51]=d(" Alterar Senha ",-1))]),a(Ca,{modelValue:U.value,"onUpdate:modelValue":e[9]||(e[9]=t=>U.value=t),color:"primary","hide-details":"",label:"Alterar senha"},null,8,["modelValue"])])]),_:1}),U.value?(te(),ze(Te,{key:0},[a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:S.value,"onUpdate:modelValue":e[10]||(e[10]=t=>S.value=t),"append-inner-icon":O.value?"mdi-eye":"mdi-eye-off",density:"comfortable",label:"Nova Senha","prepend-inner-icon":"mdi-lock",rules:U.value?[r.required,r.minLength]:[],type:O.value?"text":"password",variant:"outlined","onClick:appendInner":e[11]||(e[11]=t=>O.value=!O.value)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:z.value,"onUpdate:modelValue":e[12]||(e[12]=t=>z.value=t),"append-inner-icon":G.value?"mdi-eye":"mdi-eye-off",density:"comfortable",label:"Confirmar Nova Senha","prepend-inner-icon":"mdi-lock-check",rules:U.value?[r.required,r.passwordMatch]:[],type:G.value?"text":"password",variant:"outlined","onClick:appendInner":e[13]||(e[13]=t=>G.value=!G.value)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1})],64)):ie("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Ve,{class:"pa-4"},{default:l(()=>[a(we),a(k,{color:"grey",variant:"text",onClick:Je},{default:l(()=>[a(c,{class:"mr-1",icon:"mdi-close"}),e[52]||(e[52]=d(" Cancelar ",-1))]),_:1}),a(k,{color:"primary",disabled:!Y.value,loading:I.value,variant:"elevated",onClick:He},{default:l(()=>[a(c,{class:"mr-1",icon:"mdi-content-save"}),e[53]||(e[53]=d(" Salvar Alterações ",-1))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})):ie("",!0)]),_:1},8,["modelValue"]),a(re,{modelValue:R.value,"onUpdate:modelValue":e[34]||(e[34]=t=>R.value=t),"max-width":"800",persistent:""},{default:l(()=>[a($,{elevation:"8"},{default:l(()=>[a(oe,{class:"bg-primary pa-4"},{default:l(()=>[i("div",Wa,[a(c,{class:"mr-2",icon:"mdi-account-plus",size:"30"}),e[54]||(e[54]=i("span",{class:"text-h5"},"Criar Novo Usuário",-1))])]),_:1}),a(q,{class:"pa-6"},{default:l(()=>[a(Ie,{ref:"createForm",modelValue:Z.value,"onUpdate:modelValue":e[33]||(e[33]=t=>Z.value=t)},{default:l(()=>[a(N,null,{default:l(()=>[a(n,{cols:"12"},{default:l(()=>[i("h3",Qa,[a(c,{class:"mr-2"},{default:l(()=>[...e[55]||(e[55]=[d("mdi-account-circle",-1)])]),_:1}),e[56]||(e[56]=d(" Informações Pessoais ",-1))])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:s.value.name,"onUpdate:modelValue":e[16]||(e[16]=t=>s.value.name=t),density:"comfortable","hide-details":"auto",label:"Nome Completo","prepend-inner-icon":"mdi-account",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:s.value.email,"onUpdate:modelValue":e[17]||(e[17]=t=>s.value.email=t),density:"comfortable","hide-details":"auto",label:"Email","prepend-inner-icon":"mdi-email",rules:[r.required,r.email],type:"email",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12"},{default:l(()=>[a(W,{class:"my-4"}),i("h3",Xa,[a(c,{class:"mr-2"},{default:l(()=>[...e[57]||(e[57]=[d("mdi-phone",-1)])]),_:1}),e[58]||(e[58]=d(" Informações de Contato ",-1))])]),_:1}),a(n,{cols:"12",md:"4"},{default:l(()=>[a(D,{modelValue:s.value.tipo_contato,"onUpdate:modelValue":e[18]||(e[18]=t=>s.value.tipo_contato=t),density:"comfortable","hide-details":"auto",items:[{title:"Telefone",value:"telefone"},{title:"WhatsApp",value:"whatsapp"},{title:"Email",value:"email"},{title:"Instagram",value:"instagram"},{title:"Telegram",value:"telegram"},{title:"Outro",value:"outro"}],label:"Tipo de Contato","prepend-inner-icon":"mdi-phone",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"4"},{default:l(()=>[a(b,{modelValue:s.value.valor_contato,"onUpdate:modelValue":e[19]||(e[19]=t=>s.value.valor_contato=t),density:"comfortable","hide-details":"auto",label:"Valor do Contato","prepend-inner-icon":"mdi-account-voice",mask:Ne(s.value.tipo_contato),rules:[r.required],variant:"outlined",onInput:Le,onKeypress:Be},null,8,["modelValue","mask","rules"])]),_:1}),a(n,{cols:"12",md:"4"},{default:l(()=>[a(b,{modelValue:s.value.codigo_pais,"onUpdate:modelValue":e[20]||(e[20]=t=>s.value.codigo_pais=t),density:"comfortable","hide-details":"auto",label:"Código do País","prepend-inner-icon":"mdi-flag",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12"},{default:l(()=>[a(W,{class:"my-4"}),i("h3",Ya,[a(c,{class:"mr-2"},{default:l(()=>[...e[59]||(e[59]=[d("mdi-map-marker",-1)])]),_:1}),e[60]||(e[60]=d(" Informações de Endereço ",-1))])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(D,{modelValue:s.value.id_uf,"onUpdate:modelValue":[e[21]||(e[21]=t=>s.value.id_uf=t),Me],density:"comfortable","hide-details":"auto","item-title":"label","item-value":"value",items:ce.value,label:"UF","prepend-inner-icon":"mdi-map",rules:[r.required],variant:"outlined"},null,8,["modelValue","items","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(D,{modelValue:s.value.id_municipio,"onUpdate:modelValue":e[22]||(e[22]=t=>s.value.id_municipio=t),density:"comfortable","hide-details":"auto","item-title":"label","item-value":"value",items:le.value,label:"Município","prepend-inner-icon":"mdi-city",rules:[r.required],variant:"outlined"},null,8,["modelValue","items","rules"])]),_:1}),a(n,{cols:"12",md:"8"},{default:l(()=>[a(b,{modelValue:s.value.logradouro,"onUpdate:modelValue":e[23]||(e[23]=t=>s.value.logradouro=t),density:"comfortable","hide-details":"auto",label:"Logradouro","prepend-inner-icon":"mdi-road",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"4"},{default:l(()=>[a(b,{modelValue:s.value.numero,"onUpdate:modelValue":e[24]||(e[24]=t=>s.value.numero=t),density:"comfortable","hide-details":"auto",label:"Número","prepend-inner-icon":"mdi-numeric",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:s.value.complemento,"onUpdate:modelValue":e[25]||(e[25]=t=>s.value.complemento=t),density:"comfortable","hide-details":"auto",label:"Complemento","prepend-inner-icon":"mdi-home",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:l(()=>[a(b,{modelValue:s.value.cep,"onUpdate:modelValue":e[26]||(e[26]=t=>s.value.cep=t),density:"comfortable","hide-details":"auto",label:"CEP","prepend-inner-icon":"mdi-mailbox",mask:"#####-###",rules:[r.required],variant:"outlined",onInput:je,onKeypress:Oe},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"3"},{default:l(()=>[a(b,{modelValue:s.value.bairro,"onUpdate:modelValue":e[27]||(e[27]=t=>s.value.bairro=t),density:"comfortable","hide-details":"auto",label:"Bairro","prepend-inner-icon":"mdi-home-group",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12"},{default:l(()=>[a(W,{class:"my-4"}),i("h3",Za,[a(c,{class:"mr-2"},{default:l(()=>[...e[61]||(e[61]=[d("mdi-briefcase",-1)])]),_:1}),e[62]||(e[62]=d(" Informações Profissionais ",-1))])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(D,{modelValue:s.value.role,"onUpdate:modelValue":e[28]||(e[28]=t=>s.value.role=t),density:"comfortable","hide-details":"auto",items:["Admin","Gerente","Operador","Visualizador"],label:"Função","prepend-inner-icon":"mdi-shield-account",rules:[r.required],variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12"},{default:l(()=>[a(W,{class:"my-4"}),i("h3",el,[a(c,{class:"mr-2"},{default:l(()=>[...e[63]||(e[63]=[d("mdi-shield-lock",-1)])]),_:1}),e[64]||(e[64]=d(" Segurança ",-1))]),a(ha,{class:"mb-4",color:"info",icon:"mdi-information",variant:"tonal"},{default:l(()=>[...e[65]||(e[65]=[d(" A senha deve ter no mínimo 6 caracteres ",-1)])]),_:1})]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:s.value.password,"onUpdate:modelValue":e[29]||(e[29]=t=>s.value.password=t),"append-inner-icon":K.value?"mdi-eye":"mdi-eye-off",density:"comfortable","hide-details":"auto",label:"Senha","prepend-inner-icon":"mdi-lock",rules:[r.required,r.minLength],type:K.value?"text":"password",variant:"outlined","onClick:appendInner":e[30]||(e[30]=t=>K.value=!K.value)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1}),a(n,{cols:"12",md:"6"},{default:l(()=>[a(b,{modelValue:s.value.confirmPassword,"onUpdate:modelValue":e[31]||(e[31]=t=>s.value.confirmPassword=t),"append-inner-icon":J.value?"mdi-eye":"mdi-eye-off",density:"comfortable","hide-details":"auto",label:"Confirmar Senha","prepend-inner-icon":"mdi-lock-check",rules:[r.required,r.newPasswordMatch],type:J.value?"text":"password",variant:"outlined","onClick:appendInner":e[32]||(e[32]=t=>J.value=!J.value)},null,8,["modelValue","append-inner-icon","rules","type"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Ve,{class:"pa-4"},{default:l(()=>[a(we),a(k,{color:"grey",variant:"text",onClick:Ye},{default:l(()=>[a(c,{class:"mr-1",icon:"mdi-close"}),e[66]||(e[66]=d(" Cancelar ",-1))]),_:1}),a(k,{color:"primary",disabled:!Z.value,loading:I.value,variant:"elevated",onClick:Ze},{default:l(()=>[a(c,{class:"mr-1",icon:"mdi-account-plus"}),e[67]||(e[67]=d(" Criar Usuário ",-1))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:F.value,"onUpdate:modelValue":e[36]||(e[36]=t=>F.value=t),"max-width":"500"},{default:l(()=>[a($,{elevation:"8"},{default:l(()=>[a(oe,{class:ue([u.value?.status==="active"?"bg-warning":"bg-success","pa-4"])},{default:l(()=>[a(c,{class:"mr-2",icon:u.value?.status==="active"?"mdi-account-off":"mdi-account-check",size:"30"},null,8,["icon"]),i("span",al,g(u.value?.status==="active"?"Confirmar Inativação":"Confirmar Ativação"),1)]),_:1},8,["class"]),a(q,{class:"pa-6"},{default:l(()=>[i("div",ll,[a(c,{color:u.value?.status==="active"?"warning":"success",icon:u.value?.status==="active"?"mdi-account-off":"mdi-account-check",size:"80"},null,8,["color","icon"])]),i("p",tl,[d(" Tem certeza que deseja "+g(u.value?.status==="active"?"inativar":"ativar")+" o usuário ",1),i("strong",{class:ue(u.value?.status==="active"?"text-warning":"text-success")},g(u.value?.name),3),e[68]||(e[68]=d("? ",-1))]),i("p",ol,g(u.value?.status==="active"?"O usuário não poderá mais acessar o sistema.":"O usuário poderá acessar o sistema novamente."),1)]),_:1}),a(Ve,{class:"pa-4"},{default:l(()=>[a(we),a(k,{color:"grey",variant:"text",onClick:e[35]||(e[35]=t=>F.value=!1)},{default:l(()=>[a(c,{class:"mr-1",icon:"mdi-close"}),e[69]||(e[69]=d(" Cancelar ",-1))]),_:1}),a(k,{color:u.value?.status==="active"?"warning":"success",variant:"elevated",onClick:Qe},{default:l(()=>[a(c,{class:"mr-1",icon:u.value?.status==="active"?"mdi-account-off":"mdi-account-check"},null,8,["icon"]),d(" "+g(u.value?.status==="active"?"Inativar":"Ativar"),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(_a,{modelValue:x.value,"onUpdate:modelValue":e[37]||(e[37]=t=>x.value=t),color:h.value,elevation:"8",location:"top right",timeout:4e3},{default:l(()=>[i("div",sl,[a(c,{class:"mr-2",icon:h.value==="success"?"mdi-check-circle":h.value==="error"?"mdi-alert-circle":"mdi-information"},null,8,["icon"]),d(" "+g(C.value),1)])]),_:1},8,["modelValue","color"])]))}}),_l=ua(il,[["__scopeId","data-v-f5db0c22"]]);export{_l as default};
